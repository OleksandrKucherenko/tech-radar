var tK=(I,R)=>()=>(R||I((R={exports:{}}).exports,R),R.exports);var oK=tK((eK,_)=>{var c=function(){function I(K,Z){return`translate(${K},${Z})`}function R(K,Z,$){let J=$[$.length-1].radius,H=20;return[Math.max(0,Z[K].factor_x*J)-(J+20),Math.max(0,Z[K].factor_y*J)-(J+20),J+40,J+40].join(" ")}function HK(K,Z,$){if($.legend_offset)return $.legend_offset;let J=Array(K),H=Z*0.08,Y=-Z-$.legend_column_width+H,F=Z-H,X=[],U=[];for(let V=0;V<K;V++)(V%2===0?U:X).push(V);let G=-Z+80,D=2*Z-160;function j(V){if(V<=1)return 0;return Math.max($.legend_vertical_spacing,D/(V-1))}function z(V,N){let T=j(V.length);for(let k=0;k<V.length;k++){let P=V[k];J[P]={x:N,y:G+k*T}}}return z(X,Y),z(U,F),J}function JK(K){let Z=K.node().closest(".radar-layout");if(Z)return K.select(()=>Z);let $=K.node(),J=$.parentNode,H=document.createElement("div");H.className="radar-layout";let Y=document.createElement("div");Y.className="radar-legend-column left";let F=document.createElement("div");F.className="radar-svg-container";let X=document.createElement("div");return X.className="radar-legend-column right",J.insertBefore(H,$),F.appendChild($),H.appendChild(Y),H.appendChild(F),H.appendChild(X),K.select(()=>H)}function UK(K){K.svg_id=K.svg||"radar",K.width=K.width||1450,K.height=K.height||1000,K.colors="colors"in K?K.colors:{background:"#fff",grid:"#dddde0",inactive:"#ddd"},K.print_layout="print_layout"in K?K.print_layout:!0,K.links_in_new_tabs="links_in_new_tabs"in K?K.links_in_new_tabs:!0,K.repo_url=K.repo_url||"#",K.print_ring_descriptions_table="print_ring_descriptions_table"in K?K.print_ring_descriptions_table:!1,K.legend_column_width=K.legend_column_width||140,K.legend_line_height=K.legend_line_height||10,K.segment_radial_padding="segment_radial_padding"in K?K.segment_radial_padding:16,K.segment_angular_padding="segment_angular_padding"in K?K.segment_angular_padding:12,K.chart_padding="chart_padding"in K?K.chart_padding:60,K.blip_collision_radius="blip_collision_radius"in K?K.blip_collision_radius:14,K.legend_vertical_spacing=K.legend_vertical_spacing||20,K.radar_horizontal_offset="radar_horizontal_offset"in K?K.radar_horizontal_offset:Math.round(K.legend_column_width*0.25),K.debug_geometry="debug_geometry"in K?K.debug_geometry:!1;let Z=window.innerWidth||document.documentElement.clientWidth,$=window.innerHeight||document.documentElement.clientHeight;if(Z<1024&&!K.scale){let Y=Math.min(Z/1450,$/1000);K.scale=Math.max(0.5,Math.min(1,Y))}let J=K.quadrants.length,H=K.rings.length;if(J>=5||H>=6){let Y=1+(J-4)*0.05+(H-4)*0.03;if(!K.width_override)K.width=Math.round(K.width*Math.min(Y,1.3));if(!K.height_override)K.height=Math.round(K.height*Math.min(Y,1.3));if(J>=7||H>=7)K.blip_collision_radius=Math.max(10,K.blip_collision_radius*0.9)}}function YK(K){let Z=K.print_layout&&K.title?60:0,$=K.print_layout?40:0,J=2*K.chart_padding+40,H=Math.max(J,K.height-Z-$),Y=Math.max(2*K.chart_padding+40,K.width),F=Math.min(Y,H)/2-K.chart_padding,X=Math.max(10,F);return{title_height:Z,footer_height:$,available_height:H,available_width:Y,target_outer_radius:X}}function GK(K,Z,$){if(!K.title_offset)K.title_offset={x:-Z,y:-Z-40};if(!K.footer_offset)K.footer_offset={x:-Z,y:Z+60};K.legend_offset=HK($,Z,K)}function XK(K){let Z=[],$=2/K,J=K===2?-0.5:0;for(let H=0;H<K;H++){let Y=-1+H*$+J,F=-1+(H+1)*$+J,X=-Math.PI+(H+0.5)*$*Math.PI+J*Math.PI;Z.push({radial_min:Y,radial_max:F,factor_x:Math.cos(X),factor_y:Math.sin(X)})}return Z}function m(K,Z,$){let J=2*Math.PI,H=K,Y=Z;while(Y<=H)Y+=J;let F=[-Math.PI,-Math.PI/2,0,Math.PI/2,Math.PI,3*Math.PI/2,2*Math.PI],X=[H,Y];F.forEach((V)=>{let N=V;while(N<H)N+=J;if(N<=Y)X.push(N)});let U=1/0,G=-1/0,D=1/0,j=-1/0;X.forEach((V)=>{let N=Math.cos(V),T=Math.sin(V);U=Math.min(U,N),G=Math.max(G,N),D=Math.min(D,T),j=Math.max(j,T)});let z=20;return{min:{x:U*$-z,y:D*$-z},max:{x:G*$+z,y:j*$+z}}}function FK(K){if(K===4)return[2,3,1,0];let Z=[],$=Math.floor(K/2);for(let J=0;J<K;J++)Z.push(($+J)%K);return Z}var h=[130,220,310,400],u=400;function DK(K,Z){let $=[];if(K===4)for(let H=0;H<4;H++)$.push(h[H]);else for(let H=0;H<K;H++){let Y=H/(K-1)*3,F=Math.floor(Y),X=Y-F,U;if(F>=3)U=u;else U=h[F]+(h[F+1]-h[F])*X;$.push(U)}let J=Z/u;return $.map((H)=>({radius:Math.max(10,Math.round(H*J))}))}function VK(K){let{x:Z,y:$}=K;return{t:Math.atan2($,Z),r:Math.sqrt(Z*Z+$*$)}}function f(K){let{r:Z,t:$}=K;return{x:Z*Math.cos($),y:Z*Math.sin($)}}function q(K,Z,$){let J=Math.min(Z,$),H=Math.max(Z,$);return Math.min(Math.max(K,J),H)}function jK(K,Z,$){return{t:K.t,r:q(K.r,Z,$)}}function s(K,Z,$){return{x:q(K.x,Z.x,$.x),y:q(K.y,Z.y,$.y)}}function d(K,Z,$,J,H,Y){let F=$[K].radial_min*Math.PI,X=$[K].radial_max*Math.PI,U=Z===0?30:J[Z-1].radius,G=J[Z].radius,D=U+H.segment_radial_padding,j=G-H.segment_radial_padding;if(j<=D){let O=(U+G)/2;D=Math.max(0,O-1),j=O+1}let z=(D+j)/2,V=H.segment_angular_padding/Math.max(z,1),N=Math.max(0,(X-F)/2-0.01);V=Math.min(V,N);let T=F+V,k=X-V;if(k<=T)T=F,k=X;let P=m(T,k,j),Q=P.min,S=P.max;function B(O){let W=s(O,Q,S),w=VK(W);return w.r=q(w.r,D,j),w.t=q(w.t,T,k),f(w)}function E(O){let W=B({x:O.x,y:O.y});return O.x=W.x,O.y=W.y,W}return{clipx:(O)=>{return E(O).x},clipy:(O)=>{return E(O).y},clip:(O)=>{let W=B({x:O.x,y:O.y});return O.x=W.x,O.y=W.y,W},random:()=>f({t:Y(T,k),r:Y(D,j)})}}var x={demoSlug:"tech-radar",onError:(K)=>{if(typeof window<"u"&&typeof window.alert==="function")window.alert(K);else console.error(K)},onSuccess:()=>{}},t={read:"Failed to read the selected file. Please try again.",parse:"The selected file is not valid JSON. Please choose a valid radar configuration."};function o(K={}){let Z={...x,...K};return Z.onError=typeof K.onError==="function"?K.onError:x.onError,Z.onSuccess=typeof K.onSuccess==="function"?K.onSuccess:x.onSuccess,Z}function WK(K=new Date){let Z=(U)=>U.toString().padStart(2,"0"),$=K.getFullYear(),J=K.getMonth()+1,H=K.getDate(),Y=K.getHours(),F=K.getMinutes(),X=K.getSeconds();return`${$}${Z(J)}${Z(H)}-${Z(Y)}${Z(F)}${Z(X)}`}function NK(K,Z){let $=new Blob([K],{type:"application/json"}),H=(typeof window<"u"&&window.URL?window.URL:URL).createObjectURL($),Y=document.createElement("a");return Y.download=Z,Y.href=H,{link:Y,url:H}}function b(K,Z){Z.onError(K)}function zK(K,Z,$={}){if(!K)throw Error("exportConfig requires a button element");if(typeof Z!=="function")throw Error("exportConfig requires a config provider function");let J=o($),H=J.demoSlug||x.demoSlug,Y=async()=>{try{let F=await Z();if(!F)throw Error("No radar configuration is available to export.");let X=JSON.stringify(F,null,2),U=WK(),G=`${H}-${U}.json`,{link:D,url:j}=NK(X,G);D.click(),(typeof window<"u"&&window.URL?window.URL:URL).revokeObjectURL(j),J.onSuccess({fileName:G})}catch(F){b(F.message||"Unable to export JSON.",J)}};return K.addEventListener("click",Y),()=>K.removeEventListener("click",Y)}function kK(K,Z,$={}){if(!K)throw Error("importConfig requires a file input element");if(typeof Z!=="function")throw Error("importConfig requires an applyConfig callback");let J=o($),H=(Y)=>{let[F]=Y.target.files||[];if(!F)return;let X=new FileReader;X.onload=async(U)=>{let G;try{G=JSON.parse(U.target.result)}catch(D){b(t.parse,J),K.value="";return}try{await Z(G),J.onSuccess({fileName:F.name})}catch(D){b(D.message||"Unable to import configuration.",J)}finally{K.value=""}},X.onerror=()=>{b(t.read,J),K.value=""},X.readAsText(F)};return K.addEventListener("change",H),()=>K.removeEventListener("change",H)}function TK(){return{exportConfig:zK,importConfig:kK}}class g{constructor(K=42){this.seed=K,this.initialSeed=K}next(){let K=Math.sin(this.seed++)*1e4;return K-Math.floor(K)}between(K,Z){return K+this.next()*(Z-K)}normalBetween(K,Z){return K+(this.next()+this.next())*0.5*(Z-K)}reset(K){this.seed=K!==void 0?K:this.initialSeed}}class r{constructor(K,Z,$,J,H){this.config=K,this.quadrants=Z,this.rings=$,this.randomNext=J,this.randomBetween=H,this.numQuadrants=Z.length,this.numRings=$.length}processEntries(K){let Z=this.segmentEntries(K);return this.assignSegmentsAndColors(K),this.positionEntries(Z),this.assignIds(Z),this.calculateCollisionRadii(Z),K}segmentEntries(K){let Z=Array(this.numQuadrants);for(let $=0;$<this.numQuadrants;$++){Z[$]=Array(this.numRings);for(let J=0;J<this.numRings;J++)Z[$][J]=[]}for(let $=0;$<K.length;$++){let J=K[$];Z[J.quadrant][J.ring].push(J)}return Z}assignSegmentsAndColors(K){for(let Z=0;Z<K.length;Z++){let $=K[Z];$.segment=d($.quadrant,$.ring,this.quadrants,this.rings,this.config,this.randomBetween),$.color=$.active||this.config.print_layout?this.config.rings[$.ring].color:this.config.colors.inactive}}positionEntries(K){for(let Z=0;Z<this.numQuadrants;Z++)for(let $=0;$<this.numRings;$++)this.gridPosition(K[Z][$],Z,$)}gridPosition(K,Z,$){if(K.length===0)return;let J=this.quadrants[Z].radial_min*Math.PI,H=this.quadrants[Z].radial_max*Math.PI,Y=$===0?30:this.rings[$-1].radius,F=this.rings[$].radius,X=Y+this.config.segment_radial_padding,U=F-this.config.segment_radial_padding;if(U<=X){let M=(Y+F)/2;X=Math.max(0,M-1),U=M+1}let G=(X+U)/2,D=this.config.segment_angular_padding/Math.max(G,1),j=Math.max(0,(H-J)/2-0.01);D=Math.min(D,j);let z=J+D,N=H-D-z,T=U-X,k=K.length,Q=N*($===0?X:G),S=T,B=this.config.blip_collision_radius||14,E=Math.max(3,Math.floor(Q/(B*0.7))),O=Math.max(3,Math.floor(S/(B*0.7))),W,w,A=Math.ceil(Math.sqrt(k)),C=Q/Math.max(S,1);if(k===1)W=1,w=1;else if(k<=4)W=Math.min(k,E),w=Math.ceil(k/W);else{if(C>2)W=Math.min(E,Math.ceil(A*1.5)),w=Math.ceil(k/W);else if(C>1)W=Math.min(E,Math.ceil(A*1.2)),w=Math.ceil(k/W);else if(C<0.5)W=Math.min(E,Math.max(3,Math.floor(A*($===0?0.85:0.7)))),w=Math.ceil(k/W);else W=Math.min(E,Math.max(3,A)),w=Math.ceil(k/W);W=Math.max(2,Math.min(W,E)),w=Math.max(2,Math.min(w,O))}for(let M=0;M<K.length;M++){let L=K[M],KK=M%W,l=Math.floor(M/W);if(l>=w){let dK=W*w,$K=M%dK;KK=$K%W,l=Math.floor($K/W)}let lK=(KK+0.15+this.randomNext()*0.7)/W,cK=(l+0.15+this.randomNext()*0.7)/w,uK=z+lK*N,sK=X+cK*T,ZK=f({t:uK,r:sK});L.x=ZK.x,L.y=ZK.y}}assignIds(K){let Z=1,$=FK(this.numQuadrants);for(let J of $)for(let H=0;H<this.numRings;H++){let Y=K[J][H];Y.sort((F,X)=>F.label.localeCompare(X.label));for(let F=0;F<Y.length;F++)Y[F].id=`${Z++}`}}calculateCollisionRadii(K){for(let Z=0;Z<this.numQuadrants;Z++)for(let $=0;$<this.numRings;$++){let J=K[Z][$];if(J.length===0)continue;let H=$===0?30:this.rings[$-1].radius,Y=this.rings[$].radius,F=H+this.config.segment_radial_padding,X=Y-this.config.segment_radial_padding;if(X<=F){let T=(H+Y)/2;F=Math.max(0,T-1),X=T+1}let U=(this.quadrants[Z].radial_max-this.quadrants[Z].radial_min)*Math.PI,G=(F+X)/2,D=X-F,z=U*G*D/J.length,V=Math.sqrt(z/Math.PI)*0.55,N=Math.max(12,V);if(J.length>10)N=Math.max(N,13);if(J.length>15)N=Math.max(N,14);if($===0&&this.numQuadrants>=6)N=Math.max(10,N*0.9);for(let T=0;T<J.length;T++)J[T].collision_radius=N}}}function PK(K,Z,$,J,H,Y,F){let X=window.d3,U=K.selectAll(".blip").data(Z).enter().append("g").attr("class","blip").attr("transform",(G)=>I(G.x,G.y)).on("mouseover",(G,D)=>{J(D,$),Y(D)}).on("mouseout",(G,D)=>{H(),F(D)});return U.each(function(G){let D=X.select(this),j=D;if(G.active&&Object.hasOwn(G,"link")&&G.link){if(j=D.append("a").attr("xlink:href",G.link),$.links_in_new_tabs)j.attr("target","_blank")}MK(j,G),OK(j,G,$)}),U}function MK(K,Z){let $=window.d3;if(Z.moved===1)K.append("path").attr("d","M -11,5 11,5 0,-13 z").style("fill",Z.color);else if(Z.moved===-1)K.append("path").attr("d","M -11,-5 11,-5 0,13 z").style("fill",Z.color);else if(Z.moved===2)K.append("path").attr("d",$.symbol().type($.symbolStar).size(200)).style("fill",Z.color);else K.append("circle").attr("r",9).attr("fill",Z.color)}function OK(K,Z,$){if(Z.active||$.print_layout){let J=$.print_layout?Z.id:Z.label.match(/[a-z]/i);K.append("text").text(J).attr("y",3).attr("text-anchor","middle").style("fill","#fff").style("font-family",$.font_family).style("font-size",(H)=>J.length>2?"8px":"9px").style("pointer-events","none").style("user-select","none")}}function wK(K,Z,$,J,H,Y,F){let X=window.d3,U=K.append("g").attr("id","debug-layer"),G=J[J.length-1].radius;EK(U,Z,$,J,H,Y,F),LK(U,Z.entries,Z.blip_collision_radius),QK(U,G),CK(U,H,G),IK(U,G)}function EK(K,Z,$,J,H,Y,F){let X=window.d3;for(let U=0;U<H;U++)for(let G=0;G<Y;G++){let D=G===0?30:J[G-1].radius,j=J[G].radius,z=D+Z.segment_radial_padding,V=j-Z.segment_radial_padding,N=(z+V)/2,T=Z.segment_angular_padding/Math.max(N,1),k=$[U].radial_min*Math.PI,P=$[U].radial_max*Math.PI,Q=Math.max(0,(P-k)/2-0.01);T=Math.min(T,Q);let S=k+T,B=P-T;if(B<=S)S=k,B=P;if(BK(K,z,V,S,B,H,G),AK(K,$[U].radial_min*Math.PI,$[U].radial_max*Math.PI,V),G===0)SK(K,U,G,S,B,z,V,F[U][G].length)}}function BK(K,Z,$,J,H,Y,F){let X=window.d3,U=Math.PI/(2*Y),G=Y%4===1?U:-U,D=X.arc().innerRadius(Z).outerRadius($).startAngle(-H+G).endAngle(-J+G);K.append("path").attr("d",D).attr("fill","none").attr("stroke",F===0?"#ff0000":"#00ffff").attr("stroke-width",F===0?2:1).attr("stroke-dasharray","5,5").attr("opacity",0.5)}function AK(K,Z,$,J){let H=m(Z,$,J);K.append("rect").attr("x",H.min.x).attr("y",H.min.y).attr("width",H.max.x-H.min.x).attr("height",H.max.y-H.min.y).attr("fill","none").attr("stroke","#ffff00").attr("stroke-width",1).attr("stroke-dasharray","3,3").attr("opacity",0.3)}function SK(K,Z,$,J,H,Y,F,X){let U=(J+H)/2,G=(Y+F)/2,D=Math.cos(U)*G,j=Math.sin(U)*G,z=(H-J)*Y;K.append("text").attr("x",D).attr("y",j).attr("text-anchor","middle").attr("font-size","10px").attr("fill","#ff0000").attr("font-weight","bold").text(`Q${Z}R${$}: ${X} items, arc=${z.toFixed(0)}px`)}function LK(K,Z,$){let J=window.d3;K.append("g").attr("id","debug-collision-radii").selectAll("circle").data(Z).enter().append("circle").attr("cx",(H)=>H.x).attr("cy",(H)=>H.y).attr("r",(H)=>H.collision_radius||$).attr("fill","none").attr("stroke",(H)=>H.ring===0?"#00ff00":"#0000ff").attr("stroke-width",1).attr("stroke-dasharray","2,2").attr("opacity",0.4)}function QK(K,Z){K.append("line").attr("x1",-Z).attr("y1",0).attr("x2",Z).attr("y2",0).attr("stroke","#666").attr("stroke-width",0.5).attr("opacity",0.3),K.append("line").attr("x1",0).attr("y1",-Z).attr("x2",0).attr("y2",Z).attr("stroke","#666").attr("stroke-width",0.5).attr("opacity",0.3)}function CK(K,Z,$){for(let J=0;J<Z;J++){let H=-Math.PI+J*2*Math.PI/Z;K.append("line").attr("x1",0).attr("y1",0).attr("x2",$*Math.cos(H)).attr("y2",$*Math.sin(H)).attr("stroke","#ff00ff").attr("stroke-width",2).attr("opacity",0.6).attr("stroke-dasharray","10,5")}}function IK(K,Z){let $=K.append("g").attr("transform",I(-Z+10,-Z+10));[{y:0,text:"DEBUG MODE",color:"#000",bold:!0,fontSize:"11px"},{y:15,text:"━━ Ring 0 polar sector",color:"#ff0000",bold:!1,fontSize:"9px"},{y:28,text:"━━ Other rings polar sector",color:"#00ffff",bold:!1,fontSize:"9px"},{y:41,text:"━━ Cartesian bounding box",color:"#ffff00",bold:!1,fontSize:"9px"},{y:54,text:"○ Collision radius (Ring 0)",color:"#00ff00",bold:!1,fontSize:"9px"}].forEach((H)=>{$.append("text").attr("x",0).attr("y",H.y).attr("font-size",H.fontSize).attr("font-weight",H.bold?"bold":"normal").attr("fill",H.color).text(H.text)})}function RK(K,Z){let $=window.d3;return function(){if(K.attr("transform",(H)=>{let Y=H.segment.clip(H);return H.rendered_x=Y.x,H.rendered_y=Y.y,I(Y.x,Y.y)}),Z.debug_geometry)$.select("#debug-collision-radii").selectAll("circle").attr("cx",(H)=>H.x).attr("cy",(H)=>H.y)}}function qK(K,Z,$){let J=window.d3,H=RK(Z,$);J.forceSimulation().nodes(K).velocityDecay(0.15).alphaDecay(0.008).alphaMin(0.00005).force("collision",J.forceCollide().radius((Y)=>Y.collision_radius||$.blip_collision_radius).strength(1).iterations(6)).on("tick",H).tick(400)}function vK(K,Z,$,J,H){let Y=$.length;for(let U=0;U<Y;U++){let G=-Math.PI+U*2*Math.PI/Y;K.append("line").attr("x1",0).attr("y1",0).attr("x2",H*Math.cos(G)).attr("y2",H*Math.sin(G)).attr("class",`quadrant-line quadrant-line-${U}`).style("stroke",Z.colors.grid).style("stroke-width",1.5).style("stroke-opacity",0.3)}let X=K.append("defs").append("filter").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("id","solid");X.append("feFlood").attr("flood-color","rgb(0, 0, 0, 0.8)"),X.append("feComposite").attr("in","SourceGraphic");for(let U=0;U<J.length;U++){let G=J[U].radius,D=U===0?0:J[U-1].radius,j=Math.max(G-D,1),z=G-j/2,V=Math.max(12,Math.min(32,j*0.45));if(U>0)K.append("circle").attr("cx",0).attr("cy",0).attr("r",G).attr("class",`ring ring-${U}`).style("fill",U%2===0?"rgba(0, 0, 0, 0.01)":"rgba(0, 0, 0, 0.015)").style("stroke","none").style("pointer-events","none");if(K.append("circle").attr("cx",0).attr("cy",0).attr("r",G).attr("class",`ring-border ring-border-${U}`).style("fill","none").style("stroke",Z.colors.grid).style("stroke-width",U===0?2:1).style("stroke-opacity",U===0?0.4:0.25),Z.print_layout)K.append("text").text(Z.rings[U].name).attr("y",-z).attr("text-anchor","middle").attr("dominant-baseline","middle").style("fill",Z.rings[U].color).style("opacity",0.35).style("font-family",Z.font_family).style("font-size",`${V}px`).style("font-weight","bold").style("pointer-events","none").style("user-select","none")}}function yK(K,Z){if(Z.title&&Z.print_layout){let $=K.append("a").attr("href",Z.repo_url).attr("target",Z.links_in_new_tabs?"_blank":null);$.append("text").attr("transform",`translate(${Z.title_offset.x}, ${Z.title_offset.y})`).text(Z.title).style("font-family",Z.font_family).style("font-size","34px").style("font-weight","bold"),$.append("text").attr("transform",`translate(${Z.title_offset.x}, ${Z.title_offset.y+30})`).text(Z.date?Z.date:"").style("font-family",Z.font_family).style("font-size","14px").style("fill","#999")}if(Z.footer&&Z.print_layout)K.append("text").attr("transform",`translate(${Z.footer_offset.x}, ${Z.footer_offset.y})`).text(Z.footer).attr("xml:space","preserve").style("font-family",Z.font_family).style("font-size","10px").style("fill","#999")}function hK(K,Z){let $=K.append("g").attr("id","bubble").attr("x",0).attr("y",0).style("opacity",0).style("pointer-events","none").style("user-select","none");return $.append("rect").attr("rx",4).attr("ry",4).style("fill","#333"),$.append("text").style("font-family",Z).style("font-size","10px").style("fill","#fff"),$.append("path").attr("d","M 0,0 10,0 5,8 z").style("fill","#333"),$}function a(K,Z){if(K.active||Z.print_layout){let $=window.d3,H=$.select("#bubble text").text(K.label).node().getBBox(),Y=K.rendered_x!==void 0?K.rendered_x:K.x,F=K.rendered_y!==void 0?K.rendered_y:K.y;$.select("#bubble").attr("transform",I(Y-H.width/2,F-16)).style("opacity",0.8),$.select("#bubble rect").attr("x",-5).attr("y",-H.height).attr("width",H.width+10).attr("height",H.height+4),$.select("#bubble path").attr("transform",I(H.width/2-5,3))}}function e(){window.d3.select("#bubble").attr("transform",I(0,0)).style("opacity",0)}function i(K){let Z=document.getElementById(`legendItem${K.id}`);if(Z)Z.classList.add("legend-highlight")}function n(K){let Z=document.getElementById(`legendItem${K.id}`);if(Z)Z.classList.remove("legend-highlight")}function xK(K,Z,$,J,H,Y,F,X,U,G){K.html(""),Z.html("");let D=Y>=7?3:2,j=Math.ceil(H/2),z=Math.floor(H/2),V=H-2,N=[],T=[];for(let P=0;P<j;P++)T.push((V+P)%H);for(let P=0;P<z;P++)N.push((V-1-P+H)%H);function k(P){return N.includes(P)?K:Z}for(let P=0;P<H;P++){let S=k(P).append("div").attr("class","legend-section").style("--legend-columns",D);S.append("div").attr("class","legend-quadrant-name").text(J.quadrants[P].name);let B=S.append("div").attr("class","legend-rings");for(let E=0;E<Y;E++){let O=$[P][E];if(!O.length)continue;let W=B.append("div").attr("class","legend-ring");W.append("div").attr("class","legend-ring-name").style("color",J.rings[E].color).text(J.rings[E].name),W.append("div").attr("class","legend-ring-entries").selectAll("a").data(O).enter().append("a").attr("href",(A)=>A.link?A.link:"#").attr("target",(A)=>A.link&&J.links_in_new_tabs?"_blank":null).attr("id",(A)=>`legendItem${A.id}`).attr("class","legend-entry").text((A)=>`${A.id}. ${A.label}`).on("mouseover",(A,C)=>{F(C,J),U(C)}).on("mouseout",(A,C)=>{X(),G(C)})}}}function bK(K,Z,$,J){let H=window.d3;K.scale=K.scale||1;let Y=K.width*K.scale,F=K.height*K.scale,X=H.select(`svg#${K.svg_id}`).style("background-color",K.colors.background).attr("width",Y).attr("height",F),U=JK(X),G=U.select(".radar-legend-column.left"),D=U.select(".radar-legend-column.right"),j=U.node().getBoundingClientRect().width||K.width,z=K.legend_column_width*2+60,V=K.legend_column_width*4+80,N=Math.min(V,Math.max(z,j*0.3)),T=Math.min(4,Math.max(2,Math.floor(N/(K.legend_column_width+20))));G.style("gap",`${K.legend_vertical_spacing}px`).style("width",`${N}px`),D.style("gap",`${K.legend_vertical_spacing}px`).style("width",`${N}px`);let k=X.append("g");if("zoomed_quadrant"in K)X.attr("viewBox",R(K.zoomed_quadrant,Z,$));else{let Q=F/2+(J.title_height-J.footer_height)/2,S=Y/2+K.radar_horizontal_offset;k.attr("transform",I(S,Q).concat(`scale(${K.scale})`))}K.font_family=K.font_family||"Arial, Helvetica";let P=k.append("g");return{svg:X,radar:k,legendLeftColumn:G,legendRightColumn:D,grid:P,legendSectionColumns:T}}function pK(K){let $=window.d3.select("body").append("table").attr("class","radar-table").style("border-collapse","collapse").style("position","relative").style("top","-70px").style("margin-left","50px").style("margin-right","50px").style("font-family",K.font_family).style("font-size","13px").style("text-align","left"),J=$.append("thead"),H=$.append("tbody"),Y=`${100/K.rings.length}%`;J.append("tr").style("border","1px solid #ddd").selectAll("th").data(K.rings).enter().append("th").style("padding","8px").style("border","1px solid #ddd").style("background-color",(U)=>U.color).style("color","#fff").style("width",Y).text((U)=>U.name),H.append("tr").style("border","1px solid #ddd").selectAll("td").data(K.rings).enter().append("td").style("padding","8px").style("border","1px solid #ddd").style("width",Y).text((U)=>U.description)}function _K(K){let{demoSlug:Z,getCurrentConfig:$,onConfigImport:J,jsonIO:H}=K;if(!H||!H.importConfig||!H.exportConfig)return console.warn("JSON I/O helpers not available. Toolbar will not be initialized."),v("JSON helpers unavailable.","error"),()=>{};let{importConfig:Y,exportConfig:F}=H,X=document.getElementById("jsonImportButton"),U=document.getElementById("jsonExportButton"),G=document.getElementById("jsonImportInput");if(!X||!U||!G)return console.warn("Toolbar elements not found in DOM"),()=>{};let D=()=>G.click();X.addEventListener("click",D);let j=Y(G,(V)=>{if(J)J(V)},{demoSlug:Z,onSuccess:({fileName:V})=>{v(`Imported ${V||"configuration"} successfully`,"success")},onError:(V)=>{v(V,"error")}}),z=F(U,$,{demoSlug:Z,onSuccess:({fileName:V})=>{v(`Exported ${V}`,"success")},onError:(V)=>{v(V,"error")}});return()=>{if(X.removeEventListener("click",D),j)j();if(z)z()}}function v(K,Z="info"){let $=document.getElementById("jsonToolbarMessage");if($){if($.textContent=K,$.dataset.state=Z,Z!=="error")setTimeout(()=>{$.textContent="",delete $.dataset.state},3000)}}class y extends Error{constructor(K,Z,$){super(K);this.name="ConfigValidationError",this.field=Z,this.value=$}}function mK(K){let Z=[];if(!K.quadrants||K.quadrants.length<2||K.quadrants.length>8)Z.push(new y(`Number of quadrants must be between 2 and 8 (found: ${K.quadrants?.length||0})`,"quadrants",K.quadrants?.length));if(!K.rings||K.rings.length<4||K.rings.length>8)Z.push(new y(`Number of rings must be between 4 and 8 (found: ${K.rings?.length||0})`,"rings",K.rings?.length));if(K.entries&&K.quadrants&&K.rings)K.entries.forEach(($,J)=>{if($.quadrant<0||$.quadrant>=K.quadrants.length)Z.push(new y(`Entry '${$.label}' has invalid quadrant: ${$.quadrant} (must be 0-${K.quadrants.length-1})`,`entries[${J}].quadrant`,$.quadrant));if($.ring<0||$.ring>=K.rings.length)Z.push(new y(`Entry '${$.label}' has invalid ring: ${$.ring} (must be 0-${K.rings.length-1})`,`entries[${J}].ring`,$.ring))});if(Z.length>0)throw Z[0];return!0}function p(K){UK(K);let Z=YK(K),$=Z.target_outer_radius;mK(K);let J=new g(42),H=()=>J.next(),Y=(M,L)=>J.between(M,L),F=(M,L)=>J.normalBetween(M,L),X=K.quadrants.length,U=XK(X),G=K.rings.length,D=DK(G,$),j=D[D.length-1].radius,z=U.map((M)=>m(M.radial_min*Math.PI,M.radial_max*Math.PI,j));GK(K,j,X);let V=q,N=jK,T=s;function k(M,L){return d(M,L,U,D,K,Y)}new r(K,U,D,H,Y).processEntries(K.entries);let Q=Array(X);for(let M=0;M<X;M++){Q[M]=Array(G);for(let L=0;L<G;L++)Q[M][L]=[]}for(let M=0;M<K.entries.length;M++){let L=K.entries[M];Q[L.quadrant][L.ring].push(L)}let S=bK(K,U,D,Z),{radar:B,legendLeftColumn:E,legendRightColumn:O,grid:W}=S;if(vK(W,K,U,D,j),!K.footer)K.footer="▲ moved up     ▼ moved down     ★ new     ⬤ no change";if(yK(B,K),K.print_layout)E.style("display","flex"),O.style("display","flex"),xK(E,O,Q,K,X,G,a,e,i,n);else E.style("display","none").html(""),O.style("display","none").html("");let w=B.append("g").attr("id","rink"),A=hK(B,K.font_family),C=PK(w,K.entries,K,a,e,i,n);if(qK(K.entries,C,K),K.debug_geometry)wK(B,K,U,D,X,G,Q);if(K.print_ring_descriptions_table)pK(K)}var fK=TK();p.jsonIO=fK,p.initDemoToolbar=_K;var gK=p;return p}();if(typeof window<"u")window.radar_visualization=c;if(typeof _<"u"&&typeof _.exports<"u")_.exports=c;if(typeof global<"u")global.radar_visualization=c});export default oK();
