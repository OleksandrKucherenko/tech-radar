var GZ=(q,I)=>()=>(I||q((I={exports:{}}).exports,I),I.exports);var HZ=GZ((DZ,l)=>{var g=function(){function q(K,Z){return`translate(${K},${Z})`}function I(K,Z,$){let U=$[$.length-1].radius,J=20;return[Math.max(0,Z[K].factor_x*U)-(U+20),Math.max(0,Z[K].factor_y*U)-(U+20),U+40,U+40].join(" ")}function DK(K,Z,$){if($.legend_offset)return $.legend_offset;let U=Array(K),J=Z*0.08,G=-Z-$.legend_column_width+J,V=Z-J,X=[],Y=[];for(let D=0;D<K;D++)(D%2===0?Y:X).push(D);let H=-Z+80,W=2*Z-160;function F(D){if(D<=1)return 0;return Math.max($.legend_vertical_spacing,W/(D-1))}function N(D,M){let j=F(D.length);for(let z=0;z<D.length;z++){let k=D[z];U[k]={x:M,y:H+z*j}}}return N(X,G),N(Y,V),U}function FK(K){let Z=K.node().closest(".radar-layout");if(Z)return K.select(()=>Z);let $=K.node(),U=$.parentNode,J=document.createElement("div");J.className="radar-layout";let G=document.createElement("div");G.className="radar-legend-column left";let V=document.createElement("div");V.className="radar-svg-container";let X=document.createElement("div");return X.className="radar-legend-column right",U.insertBefore(J,$),V.appendChild($),J.appendChild(G),J.appendChild(V),J.appendChild(X),K.select(()=>J)}function jK(K){K.svg_id=K.svg||"radar",K.width=K.width||1450,K.height=K.height||1000,K.colors="colors"in K?K.colors:{background:"#fff",grid:"#dddde0",inactive:"#ddd"},K.print_layout="print_layout"in K?K.print_layout:!0,K.links_in_new_tabs="links_in_new_tabs"in K?K.links_in_new_tabs:!0,K.repo_url=K.repo_url||"#",K.print_ring_descriptions_table="print_ring_descriptions_table"in K?K.print_ring_descriptions_table:!1,K.legend_column_width=K.legend_column_width||140,K.legend_line_height=K.legend_line_height||10,K.segment_radial_padding="segment_radial_padding"in K?K.segment_radial_padding:16,K.segment_angular_padding="segment_angular_padding"in K?K.segment_angular_padding:12,K.chart_padding="chart_padding"in K?K.chart_padding:60,K.blip_collision_radius="blip_collision_radius"in K?K.blip_collision_radius:14,K.legend_vertical_spacing=K.legend_vertical_spacing||20,K.radar_horizontal_offset="radar_horizontal_offset"in K?K.radar_horizontal_offset:Math.round(K.legend_column_width*0.25),K.debug_geometry="debug_geometry"in K?K.debug_geometry:!1;let Z=window.innerWidth||document.documentElement.clientWidth,$=window.innerHeight||document.documentElement.clientHeight;if(Z<1024&&!K.scale){let G=Math.min(Z/1450,$/1000);K.scale=Math.max(0.5,Math.min(1,G))}let U=K.quadrants.length,J=K.rings.length;if(U>=5||J>=6){let G=1+(U-4)*0.05+(J-4)*0.03;if(!K.width_override)K.width=Math.round(K.width*Math.min(G,1.3));if(!K.height_override)K.height=Math.round(K.height*Math.min(G,1.3));if(U>=7||J>=7)K.blip_collision_radius=Math.max(10,K.blip_collision_radius*0.9)}}function zK(K){let Z=K.print_layout&&K.title?60:0,$=K.print_layout?40:0,U=2*K.chart_padding+40,J=Math.max(U,K.height-Z-$),G=Math.max(2*K.chart_padding+40,K.width),V=Math.min(G,J)/2-K.chart_padding,X=Math.max(10,V);return{title_height:Z,footer_height:$,available_height:J,available_width:G,target_outer_radius:X}}function NK(K,Z,$){if(!K.title_offset)K.title_offset={x:-Z,y:-Z-40};if(!K.footer_offset)K.footer_offset={x:-Z,y:Z+60};K.legend_offset=DK($,Z,K)}function TK(K){let Z=[],$=2/K,U=K===2?-0.5:0;for(let J=0;J<K;J++){let G=-1+J*$+U,V=-1+(J+1)*$+U,X=-Math.PI+(J+0.5)*$*Math.PI+U*Math.PI;Z.push({radial_min:G,radial_max:V,factor_x:Math.cos(X),factor_y:Math.sin(X)})}return Z}function c(K,Z,$){let U=2*Math.PI,J=K,G=Z;while(G<=J)G+=U;let V=[-Math.PI,-Math.PI/2,0,Math.PI/2,Math.PI,3*Math.PI/2,2*Math.PI],X=[J,G];V.forEach((D)=>{let M=D;while(M<J)M+=U;if(M<=G)X.push(M)});let Y=1/0,H=-1/0,W=1/0,F=-1/0;X.forEach((D)=>{let M=Math.cos(D),j=Math.sin(D);Y=Math.min(Y,M),H=Math.max(H,M),W=Math.min(W,j),F=Math.max(F,j)});let N=20;return{min:{x:Y*$-N,y:W*$-N},max:{x:H*$+N,y:F*$+N}}}function kK(K){if(K===4)return[2,3,1,0];let Z=[],$=Math.floor(K/2);for(let U=0;U<K;U++)Z.push(($+U)%K);return Z}var p=[130,220,310,400],t=400;function MK(K,Z){let $=[];if(K===4)for(let J=0;J<4;J++)$.push(p[J]);else for(let J=0;J<K;J++){let G=J/(K-1)*3,V=Math.floor(G),X=G-V,Y;if(V>=3)Y=t;else Y=p[V]+(p[V+1]-p[V])*X;$.push(Y)}let U=Z/t;return $.map((J)=>({radius:Math.max(10,Math.round(J*U))}))}function OK(K){let{x:Z,y:$}=K;return{t:Math.atan2($,Z),r:Math.sqrt(Z*Z+$*$)}}function u(K){let{r:Z,t:$}=K;return{x:Z*Math.cos($),y:Z*Math.sin($)}}function C(K,Z,$){let U=Math.min(Z,$),J=Math.max(Z,$);return Math.min(Math.max(K,U),J)}function PK(K,Z,$){return{t:K.t,r:C(K.r,Z,$)}}function r(K,Z,$){return{x:C(K.x,Z.x,$.x),y:C(K.y,Z.y,$.y)}}function o(K,Z,$,U,J,G){let V=$[K].radial_min*Math.PI,X=$[K].radial_max*Math.PI,Y=Z===0?30:U[Z-1].radius,H=U[Z].radius,W=Y+J.segment_radial_padding,F=H-J.segment_radial_padding;if(F<=W){let O=(Y+H)/2;W=Math.max(0,O-1),F=O+1}let N=(W+F)/2,D=J.segment_angular_padding/Math.max(N,1),M=Math.max(0,(X-V)/2-0.01);D=Math.min(D,M);let j=V+D,z=X-D;if(z<=j)j=V,z=X;let k=c(j,z,F),L=k.min,P=k.max;function S(O){let T=r(O,L,P),A=OK(T);return A.r=C(A.r,W,F),A.t=C(A.t,j,z),u(A)}function w(O){let T=S({x:O.x,y:O.y});return O.x=T.x,O.y=T.y,T}return{clipx:(O)=>{return w(O).x},clipy:(O)=>{return w(O).y},clip:(O)=>{let T=S({x:O.x,y:O.y});return O.x=T.x,O.y=T.y,T},random:()=>u({t:G(j,z),r:G(W,F)})}}var m={demoSlug:"tech-radar",onError:(K)=>{if(typeof window<"u"&&typeof window.alert==="function")window.alert(K);else console.error(K)},onSuccess:()=>{}},a={read:"Failed to read the selected file. Please try again.",parse:"The selected file is not valid JSON. Please choose a valid radar configuration."};function e(K={}){let Z={...m,...K};return Z.onError=typeof K.onError==="function"?K.onError:m.onError,Z.onSuccess=typeof K.onSuccess==="function"?K.onSuccess:m.onSuccess,Z}function wK(K=new Date){let Z=(Y)=>Y.toString().padStart(2,"0"),$=K.getFullYear(),U=K.getMonth()+1,J=K.getDate(),G=K.getHours(),V=K.getMinutes(),X=K.getSeconds();return`${$}${Z(U)}${Z(J)}-${Z(G)}${Z(V)}${Z(X)}`}function BK(K,Z){let $=new Blob([K],{type:"application/json"}),J=(typeof window<"u"&&window.URL?window.URL:URL).createObjectURL($),G=document.createElement("a");return G.download=Z,G.href=J,{link:G,url:J}}function f(K,Z){Z.onError(K)}function AK(K,Z,$={}){if(!K)throw Error("exportConfig requires a button element");if(typeof Z!=="function")throw Error("exportConfig requires a config provider function");let U=e($),J=U.demoSlug||m.demoSlug,G=async()=>{try{let V=await Z();if(!V)throw Error("No radar configuration is available to export.");let X=JSON.stringify(V,null,2),Y=wK(),H=`${J}-${Y}.json`,{link:W,url:F}=BK(X,H);W.click(),(typeof window<"u"&&window.URL?window.URL:URL).revokeObjectURL(F),U.onSuccess({fileName:H})}catch(V){f(V.message||"Unable to export JSON.",U)}};return K.addEventListener("click",G),()=>K.removeEventListener("click",G)}function EK(K,Z,$={}){if(!K)throw Error("importConfig requires a file input element");if(typeof Z!=="function")throw Error("importConfig requires an applyConfig callback");let U=e($),J=(G)=>{let[V]=G.target.files||[];if(!V)return;let X=new FileReader;X.onload=async(Y)=>{let H;try{H=JSON.parse(Y.target.result)}catch(W){f(a.parse,U),K.value="";return}try{await Z(H),U.onSuccess({fileName:V.name})}catch(W){f(W.message||"Unable to import configuration.",U)}finally{K.value=""}},X.onerror=()=>{f(a.read,U),K.value=""},X.readAsText(V)};return K.addEventListener("change",J),()=>K.removeEventListener("change",J)}function i(){return{exportConfig:AK,importConfig:EK}}class n{constructor(K=42){this.seed=K,this.initialSeed=K}next(){let K=Math.sin(this.seed++)*1e4;return K-Math.floor(K)}between(K,Z){return K+this.next()*(Z-K)}normalBetween(K,Z){return K+(this.next()+this.next())*0.5*(Z-K)}reset(K){this.seed=K!==void 0?K:this.initialSeed}}var KK=new Map;function s(K,Z){KK.set(K,Z)}function QK(K){return KK.get(K)||null}function LK(K={},Z={}){let $={},U=[];for(let[J,G]of Object.entries(K)){if(!G||G.enabled===!1)continue;let V=QK(J);if(!V){console.warn(`Plugin "${J}" not registered, skipping...`);continue}try{let X=V.init(G,Z);if($[J]=X,X&&typeof X.cleanup==="function")U.push(X.cleanup)}catch(X){console.error(`Failed to initialize plugin "${J}":`,X)}}return{plugins:$,cleanup:()=>{U.forEach((J)=>{try{J()}catch(G){console.error("Plugin cleanup error:",G)}})}}}function d({name:K,init:Z,defaults:$={}}){return{name:K,defaults:$,init:(U,J)=>{let G={...$,...U};return Z(G,J)}}}class ZK{constructor(K,Z={}){this.key=K,this.version=Z.version||1,this.namespace=Z.namespace||"tech-radar",this.fullKey=`${this.namespace}:${this.key}`}async save(K){try{let Z={version:this.version,timestamp:Date.now(),config:K};localStorage.setItem(this.fullKey,JSON.stringify(Z))}catch(Z){throw console.error("localStorage save error:",Z),Error("Failed to save to localStorage")}}async load(){try{let K=localStorage.getItem(this.fullKey);if(!K)return null;let Z=JSON.parse(K);if(Z.version!==this.version)console.warn(`Storage version mismatch: expected ${this.version}, got ${Z.version}`);return Z.config}catch(K){return console.error("localStorage load error:",K),null}}async clear(){try{localStorage.removeItem(this.fullKey)}catch(K){console.error("localStorage clear error:",K)}}async exists(){return localStorage.getItem(this.fullKey)!==null}}class $K{constructor(K,Z={}){this.key=K,this.namespace=Z.namespace||"tech-radar",this.fullKey=`${this.namespace}:${this.key}`}async save(K){try{let Z={timestamp:Date.now(),config:K};sessionStorage.setItem(this.fullKey,JSON.stringify(Z))}catch(Z){throw console.error("sessionStorage save error:",Z),Error("Failed to save to sessionStorage")}}async load(){try{let K=sessionStorage.getItem(this.fullKey);if(!K)return null;return JSON.parse(K).config}catch(K){return console.error("sessionStorage load error:",K),null}}async clear(){try{sessionStorage.removeItem(this.fullKey)}catch(K){console.error("sessionStorage clear error:",K)}}async exists(){return sessionStorage.getItem(this.fullKey)!==null}}class JK{constructor(K,Z={}){this.key=K,this.dbName=Z.dbName||"tech-radar-db",this.storeName=Z.storeName||"configurations",this.version=Z.version||1}async save(K){throw Error("IndexedDB adapter not yet implemented")}async load(){throw Error("IndexedDB adapter not yet implemented")}async clear(){throw Error("IndexedDB adapter not yet implemented")}async exists(){return!1}}function SK(K,Z,$={}){switch(K){case"localStorage":return new ZK(Z,$);case"sessionStorage":return new $K(Z,$);case"indexedDB":return new JK(Z,$);case"custom":if(!$.save||!$.load||!$.clear)throw Error("Custom storage requires save, load, and clear functions");return{save:$.save,load:$.load,clear:$.clear,exists:$.exists||(()=>Promise.resolve(!1))};default:throw Error(`Unknown storage type: ${K}`)}}var RK=d({name:"storage",defaults:{type:"localStorage",key:"default",autoLoad:!1,autoSave:!1,namespace:"tech-radar",version:1},init:(K,Z)=>{let{type:$,key:U,autoLoad:J,autoSave:G,...V}=K,{getCurrentConfig:X,onConfigChange:Y}=Z,H=SK($,U,V),W=null;if(J)W=H.load().then((N)=>{if(N&&Z.applyConfig)Z.applyConfig(N);return N});let F=null;if(G&&Y)F=Y((N)=>{H.save(N).catch((D)=>{console.error("Auto-save failed:",D)})});return{storage:H,save:async()=>{let N=X?X():null;if(!N)throw Error("No configuration to save");return H.save(N)},load:async()=>{return H.load()},clear:async()=>{return H.clear()},exists:async()=>{return H.exists()},cleanup:()=>{if(F)F()},_loadPromise:W}}}),qK=d({name:"importExport",defaults:{enabled:!0,formats:["json"],fileNamePattern:"{slug}-{timestamp}",pretty:!0},init:(K,Z)=>{let{formats:$,fileNamePattern:U,pretty:J}=K,{getCurrentConfig:G,onConfigChange:V,demoSlug:X}=Z,Y=i(),H={imports:0,exports:0,lastImport:null,lastExport:null},W=(j)=>{let z=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5),k=X||"radar-config";return U.replace("{slug}",k).replace("{timestamp}",z).replace("{operation}",j)};return{jsonIO:Y,export:async(j={})=>{let z=j.config||G?.();if(!z)throw Error("No configuration to export");let k=j.fileName||`${W("export")}.json`,L=J?JSON.stringify(z,null,2):JSON.stringify(z),P=new Blob([L],{type:"application/json"});return H.exports++,H.lastExport={timestamp:Date.now(),fileName:k,size:P.size},{fileName:k,blob:P}},import:async(j)=>{let z;if(j instanceof File||j instanceof Blob){let k=await j.text();z=JSON.parse(k)}else if(typeof j==="string")z=JSON.parse(j);else throw Error("Invalid import source");return H.imports++,H.lastImport={timestamp:Date.now(),fileName:j.name||"unknown"},z},setupExport:(j,z,k={})=>{return Y.exportConfig(j,z,{...k,demoSlug:X||k.demoSlug})},setupImport:(j,z,k={})=>{return Y.importConfig(j,z,{...k,demoSlug:X||k.demoSlug})},getStats:()=>({...H}),cleanup:()=>{}}}});function y(K,Z,$="info"){if(!K)return;if(K.textContent=Z,K.dataset.state=$,$!=="error")setTimeout(()=>{K.textContent="",delete K.dataset.state},3000)}function vK(){return`
    <div class="demo-toolbar" role="region" aria-label="JSON configuration tools">
      <div class="demo-toolbar__controls">
        <button type="button" class="demo-toolbar__button" id="jsonImportButton">Import JSON</button>
        <button type="button" class="demo-toolbar__button" id="jsonExportButton">Export JSON</button>
        <input type="file" id="jsonImportInput" accept="application/json,.json" hidden />
      </div>
      <p class="demo-toolbar__message" id="jsonToolbarMessage" role="status" aria-live="polite"></p>
    </div>
  `.trim()}var IK=d({name:"toolbar",defaults:{enabled:!0,position:"top-right",buttons:["import","export"],containerId:null,autoRender:!0},init:(K,Z)=>{let{enabled:$,containerId:U,autoRender:J,buttons:G}=K,{importExportPlugin:V,getCurrentConfig:X,onConfigImport:Y,demoSlug:H}=Z;if(!$)return{cleanup:()=>{}};let W=null,F=[],N=(D=null)=>{if(D)W=D;else if(U)W=document.getElementById(U);else if(W=document.querySelector(".demo-toolbar"),!W){let L=document.querySelector("nav.demo-links");if(L)W=document.createElement("div"),L.insertAdjacentElement("afterend",W)}if(!W){console.warn("Toolbar container not found");return}if(!W.querySelector(".demo-toolbar__controls"))W.innerHTML=vK();let M=document.getElementById("jsonImportButton"),j=document.getElementById("jsonExportButton"),z=document.getElementById("jsonImportInput"),k=document.getElementById("jsonToolbarMessage");if(!M||!j||!z){console.warn("Toolbar elements not found");return}if(!G.includes("import"))M.style.display="none";if(!G.includes("export"))j.style.display="none";if(V){let{setupImport:L,setupExport:P}=V,S=()=>z.click();M.addEventListener("click",S);let w=L(z,(T)=>{if(Y)Y(T)},{demoSlug:H,onSuccess:({fileName:T})=>{y(k,`Imported ${T||"configuration"} successfully`,"success")},onError:(T)=>{y(k,T,"error")}}),O=P(j,X,{demoSlug:H,onSuccess:({fileName:T})=>{y(k,`Exported ${T}`,"success")},onError:(T)=>{y(k,T,"error")}});F.push(()=>M.removeEventListener("click",S),w,O)}else console.warn("Import/Export plugin not available for toolbar")};if(J)if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",()=>N());else N();return{render:N,showMessage:(D,M="info")=>{let j=document.getElementById("jsonToolbarMessage");y(j,D,M)},getContainer:()=>W,cleanup:()=>{F.forEach((D)=>{if(typeof D==="function")try{D()}catch(M){console.error("Toolbar cleanup error:",M)}}),F=[]}}}});s("storage",RK),s("importExport",qK),s("toolbar",IK);class UK{constructor(K,Z,$,U,J){this.config=K,this.quadrants=Z,this.rings=$,this.randomNext=U,this.randomBetween=J,this.numQuadrants=Z.length,this.numRings=$.length}processEntries(K){let Z=this.segmentEntries(K);return this.assignSegmentsAndColors(K),this.positionEntries(Z),this.assignIds(Z),this.calculateCollisionRadii(Z),K}segmentEntries(K){let Z=Array(this.numQuadrants);for(let $=0;$<this.numQuadrants;$++){Z[$]=Array(this.numRings);for(let U=0;U<this.numRings;U++)Z[$][U]=[]}for(let $=0;$<K.length;$++){let U=K[$];Z[U.quadrant][U.ring].push(U)}return Z}assignSegmentsAndColors(K){for(let Z=0;Z<K.length;Z++){let $=K[Z];$.segment=o($.quadrant,$.ring,this.quadrants,this.rings,this.config,this.randomBetween),$.color=$.active||this.config.print_layout?this.config.rings[$.ring].color:this.config.colors.inactive}}positionEntries(K){for(let Z=0;Z<this.numQuadrants;Z++)for(let $=0;$<this.numRings;$++)this.gridPosition(K[Z][$],Z,$)}gridPosition(K,Z,$){if(K.length===0)return;let U=this.quadrants[Z].radial_min*Math.PI,J=this.quadrants[Z].radial_max*Math.PI,G=$===0?30:this.rings[$-1].radius,V=this.rings[$].radius,X=G+this.config.segment_radial_padding,Y=V-this.config.segment_radial_padding;if(Y<=X){let R=(G+V)/2;X=Math.max(0,R-1),Y=R+1}let H=(X+Y)/2,W=this.config.segment_angular_padding/Math.max(H,1),F=Math.max(0,(J-U)/2-0.01);W=Math.min(W,F);let N=U+W,M=J-W-N,j=Y-X,z=K.length,L=M*($===0?X:H),P=j,S=this.config.blip_collision_radius||14,w=Math.max(3,Math.floor(L/(S*0.7))),O=Math.max(3,Math.floor(P/(S*0.7))),T,A,Q=Math.ceil(Math.sqrt(z)),v=L/Math.max(P,1);if(z===1)T=1,A=1;else if(z<=4)T=Math.min(z,w),A=Math.ceil(z/T);else{if(v>2)T=Math.min(w,Math.ceil(Q*1.5)),A=Math.ceil(z/T);else if(v>1)T=Math.min(w,Math.ceil(Q*1.2)),A=Math.ceil(z/T);else if(v<0.5)T=Math.min(w,Math.max(3,Math.floor(Q*($===0?0.85:0.7)))),A=Math.ceil(z/T);else T=Math.min(w,Math.max(3,Q)),A=Math.ceil(z/T);T=Math.max(2,Math.min(T,w)),A=Math.max(2,Math.min(A,O))}for(let R=0;R<K.length;R++){let B=K[R],E=R%T,_=Math.floor(R/T);if(_>=A){let YZ=T*A,WK=R%YZ;E=WK%T,_=Math.floor(WK/T)}let ZZ=(E+0.15+this.randomNext()*0.7)/T,$Z=(_+0.15+this.randomNext()*0.7)/A,JZ=N+ZZ*M,UZ=X+$Z*j,VK=u({t:JZ,r:UZ});B.x=VK.x,B.y=VK.y}}assignIds(K){let Z=1,$=kK(this.numQuadrants);for(let U of $)for(let J=0;J<this.numRings;J++){let G=K[U][J];G.sort((V,X)=>V.label.localeCompare(X.label));for(let V=0;V<G.length;V++)G[V].id=`${Z++}`}}calculateCollisionRadii(K){for(let Z=0;Z<this.numQuadrants;Z++)for(let $=0;$<this.numRings;$++){let U=K[Z][$];if(U.length===0)continue;let J=$===0?30:this.rings[$-1].radius,G=this.rings[$].radius,V=J+this.config.segment_radial_padding,X=G-this.config.segment_radial_padding;if(X<=V){let j=(J+G)/2;V=Math.max(0,j-1),X=j+1}let Y=(this.quadrants[Z].radial_max-this.quadrants[Z].radial_min)*Math.PI,H=(V+X)/2,W=X-V,N=Y*H*W/U.length,D=Math.sqrt(N/Math.PI)*0.55,M=Math.max(12,D);if(U.length>10)M=Math.max(M,13);if(U.length>15)M=Math.max(M,14);if($===0&&this.numQuadrants>=6)M=Math.max(10,M*0.9);for(let j=0;j<U.length;j++)U[j].collision_radius=M}}}function CK(K,Z,$,U,J,G,V){let X=window.d3,Y=K.selectAll(".blip").data(Z).enter().append("g").attr("class","blip").attr("transform",(H)=>q(H.x,H.y)).on("mouseover",(H,W)=>{U(W,$),G(W)}).on("mouseout",(H,W)=>{J(),V(W)});return Y.each(function(H){let W=X.select(this),F=W;if(H.active&&Object.hasOwn(H,"link")&&H.link){if(F=W.append("a").attr("xlink:href",H.link),$.links_in_new_tabs)F.attr("target","_blank")}yK(F,H),hK(F,H,$)}),Y}function yK(K,Z){let $=window.d3;if(Z.moved===1)K.append("path").attr("d","M -11,5 11,5 0,-13 z").style("fill",Z.color);else if(Z.moved===-1)K.append("path").attr("d","M -11,-5 11,-5 0,13 z").style("fill",Z.color);else if(Z.moved===2)K.append("path").attr("d",$.symbol().type($.symbolStar).size(200)).style("fill",Z.color);else K.append("circle").attr("r",9).attr("fill",Z.color)}function hK(K,Z,$){if(Z.active||$.print_layout){let U=$.print_layout?Z.id:Z.label.match(/[a-z]/i);K.append("text").text(U).attr("y",3).attr("text-anchor","middle").style("fill","#fff").style("font-family",$.font_family).style("font-size",(J)=>U.length>2?"8px":"9px").style("pointer-events","none").style("user-select","none")}}function xK(K,Z,$,U,J,G,V){let X=window.d3,Y=K.append("g").attr("id","debug-layer"),H=U[U.length-1].radius;bK(Y,Z,$,U,J,G,V),fK(Y,Z.entries,Z.blip_collision_radius),lK(Y,H),cK(Y,J,H),uK(Y,H)}function bK(K,Z,$,U,J,G,V){let X=window.d3;for(let Y=0;Y<J;Y++)for(let H=0;H<G;H++){let W=H===0?30:U[H-1].radius,F=U[H].radius,N=W+Z.segment_radial_padding,D=F-Z.segment_radial_padding,M=(N+D)/2,j=Z.segment_angular_padding/Math.max(M,1),z=$[Y].radial_min*Math.PI,k=$[Y].radial_max*Math.PI,L=Math.max(0,(k-z)/2-0.01);j=Math.min(j,L);let P=z+j,S=k-j;if(S<=P)P=z,S=k;if(_K(K,N,D,P,S,J,H),pK(K,$[Y].radial_min*Math.PI,$[Y].radial_max*Math.PI,D),H===0)mK(K,Y,H,P,S,N,D,V[Y][H].length)}}function _K(K,Z,$,U,J,G,V){let X=window.d3,Y=Math.PI/(2*G),H=G%4===1?Y:-Y,W=X.arc().innerRadius(Z).outerRadius($).startAngle(-J+H).endAngle(-U+H);K.append("path").attr("d",W).attr("fill","none").attr("stroke",V===0?"#ff0000":"#00ffff").attr("stroke-width",V===0?2:1).attr("stroke-dasharray","5,5").attr("opacity",0.5)}function pK(K,Z,$,U){let J=c(Z,$,U);K.append("rect").attr("x",J.min.x).attr("y",J.min.y).attr("width",J.max.x-J.min.x).attr("height",J.max.y-J.min.y).attr("fill","none").attr("stroke","#ffff00").attr("stroke-width",1).attr("stroke-dasharray","3,3").attr("opacity",0.3)}function mK(K,Z,$,U,J,G,V,X){let Y=(U+J)/2,H=(G+V)/2,W=Math.cos(Y)*H,F=Math.sin(Y)*H,N=(J-U)*G;K.append("text").attr("x",W).attr("y",F).attr("text-anchor","middle").attr("font-size","10px").attr("fill","#ff0000").attr("font-weight","bold").text(`Q${Z}R${$}: ${X} items, arc=${N.toFixed(0)}px`)}function fK(K,Z,$){let U=window.d3;K.append("g").attr("id","debug-collision-radii").selectAll("circle").data(Z).enter().append("circle").attr("cx",(J)=>J.x).attr("cy",(J)=>J.y).attr("r",(J)=>J.collision_radius||$).attr("fill","none").attr("stroke",(J)=>J.ring===0?"#00ff00":"#0000ff").attr("stroke-width",1).attr("stroke-dasharray","2,2").attr("opacity",0.4)}function lK(K,Z){K.append("line").attr("x1",-Z).attr("y1",0).attr("x2",Z).attr("y2",0).attr("stroke","#666").attr("stroke-width",0.5).attr("opacity",0.3),K.append("line").attr("x1",0).attr("y1",-Z).attr("x2",0).attr("y2",Z).attr("stroke","#666").attr("stroke-width",0.5).attr("opacity",0.3)}function cK(K,Z,$){for(let U=0;U<Z;U++){let J=-Math.PI+U*2*Math.PI/Z;K.append("line").attr("x1",0).attr("y1",0).attr("x2",$*Math.cos(J)).attr("y2",$*Math.sin(J)).attr("stroke","#ff00ff").attr("stroke-width",2).attr("opacity",0.6).attr("stroke-dasharray","10,5")}}function uK(K,Z){let $=K.append("g").attr("transform",q(-Z+10,-Z+10));[{y:0,text:"DEBUG MODE",color:"#000",bold:!0,fontSize:"11px"},{y:15,text:"━━ Ring 0 polar sector",color:"#ff0000",bold:!1,fontSize:"9px"},{y:28,text:"━━ Other rings polar sector",color:"#00ffff",bold:!1,fontSize:"9px"},{y:41,text:"━━ Cartesian bounding box",color:"#ffff00",bold:!1,fontSize:"9px"},{y:54,text:"○ Collision radius (Ring 0)",color:"#00ff00",bold:!1,fontSize:"9px"}].forEach((J)=>{$.append("text").attr("x",0).attr("y",J.y).attr("font-size",J.fontSize).attr("font-weight",J.bold?"bold":"normal").attr("fill",J.color).text(J.text)})}function sK(K,Z){let $=window.d3;return function(){if(K.attr("transform",(J)=>{let G=J.segment.clip(J);return J.rendered_x=G.x,J.rendered_y=G.y,q(G.x,G.y)}),Z.debug_geometry)$.select("#debug-collision-radii").selectAll("circle").attr("cx",(J)=>J.x).attr("cy",(J)=>J.y)}}function dK(K,Z,$){let U=window.d3,J=sK(Z,$);U.forceSimulation().nodes(K).velocityDecay(0.15).alphaDecay(0.008).alphaMin(0.00005).force("collision",U.forceCollide().radius((G)=>G.collision_radius||$.blip_collision_radius).strength(1).iterations(6)).on("tick",J).tick(400)}function gK(K,Z,$,U,J){let G=$.length;for(let Y=0;Y<G;Y++){let H=-Math.PI+Y*2*Math.PI/G;K.append("line").attr("x1",0).attr("y1",0).attr("x2",J*Math.cos(H)).attr("y2",J*Math.sin(H)).attr("class",`quadrant-line quadrant-line-${Y}`).style("stroke",Z.colors.grid).style("stroke-width",1.5).style("stroke-opacity",0.3)}let X=K.append("defs").append("filter").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("id","solid");X.append("feFlood").attr("flood-color","rgb(0, 0, 0, 0.8)"),X.append("feComposite").attr("in","SourceGraphic");for(let Y=0;Y<U.length;Y++){let H=U[Y].radius,W=Y===0?0:U[Y-1].radius,F=Math.max(H-W,1),N=H-F/2,D=Math.max(12,Math.min(32,F*0.45));if(Y>0)K.append("circle").attr("cx",0).attr("cy",0).attr("r",H).attr("class",`ring ring-${Y}`).style("fill",Y%2===0?"rgba(0, 0, 0, 0.01)":"rgba(0, 0, 0, 0.015)").style("stroke","none").style("pointer-events","none");if(K.append("circle").attr("cx",0).attr("cy",0).attr("r",H).attr("class",`ring-border ring-border-${Y}`).style("fill","none").style("stroke",Z.colors.grid).style("stroke-width",Y===0?2:1).style("stroke-opacity",Y===0?0.4:0.25),Z.print_layout)K.append("text").text(Z.rings[Y].name).attr("y",-N).attr("text-anchor","middle").attr("dominant-baseline","middle").style("fill",Z.rings[Y].color).style("opacity",0.35).style("font-family",Z.font_family).style("font-size",`${D}px`).style("font-weight","bold").style("pointer-events","none").style("user-select","none")}}function tK(K,Z){if(Z.title&&Z.print_layout){let $=K.append("a").attr("href",Z.repo_url).attr("target",Z.links_in_new_tabs?"_blank":null);$.append("text").attr("transform",`translate(${Z.title_offset.x}, ${Z.title_offset.y})`).text(Z.title).style("font-family",Z.font_family).style("font-size","34px").style("font-weight","bold"),$.append("text").attr("transform",`translate(${Z.title_offset.x}, ${Z.title_offset.y+30})`).text(Z.date?Z.date:"").style("font-family",Z.font_family).style("font-size","14px").style("fill","#999")}if(Z.footer&&Z.print_layout)K.append("text").attr("transform",`translate(${Z.footer_offset.x}, ${Z.footer_offset.y})`).text(Z.footer).attr("xml:space","preserve").style("font-family",Z.font_family).style("font-size","10px").style("fill","#999")}function rK(K,Z){let $=K.append("g").attr("id","bubble").attr("x",0).attr("y",0).style("opacity",0).style("pointer-events","none").style("user-select","none");return $.append("rect").attr("rx",4).attr("ry",4).style("fill","#333"),$.append("text").style("font-family",Z).style("font-size","10px").style("fill","#fff"),$.append("path").attr("d","M 0,0 10,0 5,8 z").style("fill","#333"),$}function YK(K,Z){if(K.active||Z.print_layout){let $=window.d3,J=$.select("#bubble text").text(K.label).node().getBBox(),G=K.rendered_x!==void 0?K.rendered_x:K.x,V=K.rendered_y!==void 0?K.rendered_y:K.y;$.select("#bubble").attr("transform",q(G-J.width/2,V-16)).style("opacity",0.8),$.select("#bubble rect").attr("x",-5).attr("y",-J.height).attr("width",J.width+10).attr("height",J.height+4),$.select("#bubble path").attr("transform",q(J.width/2-5,3))}}function GK(){window.d3.select("#bubble").attr("transform",q(0,0)).style("opacity",0)}function HK(K){let Z=document.getElementById(`legendItem${K.id}`);if(Z)Z.classList.add("legend-highlight")}function XK(K){let Z=document.getElementById(`legendItem${K.id}`);if(Z)Z.classList.remove("legend-highlight")}function oK(K,Z,$,U,J,G,V,X,Y,H){K.html(""),Z.html("");let W=G>=7?3:2,F=Math.ceil(J/2),N=Math.floor(J/2),D=J-2,M=[],j=[];for(let k=0;k<F;k++)j.push((D+k)%J);for(let k=0;k<N;k++)M.push((D-1-k+J)%J);function z(k){return M.includes(k)?K:Z}for(let k=0;k<J;k++){let P=z(k).append("div").attr("class","legend-section").style("--legend-columns",W);P.append("div").attr("class","legend-quadrant-name").text(U.quadrants[k].name);let S=P.append("div").attr("class","legend-rings");for(let w=0;w<G;w++){let O=$[k][w];if(!O.length)continue;let T=S.append("div").attr("class","legend-ring");T.append("div").attr("class","legend-ring-name").style("color",U.rings[w].color).text(U.rings[w].name),T.append("div").attr("class","legend-ring-entries").selectAll("a").data(O).enter().append("a").attr("href",(Q)=>Q.link?Q.link:"#").attr("target",(Q)=>Q.link&&U.links_in_new_tabs?"_blank":null).attr("id",(Q)=>`legendItem${Q.id}`).attr("class","legend-entry").text((Q)=>`${Q.id}. ${Q.label}`).on("mouseover",(Q,v)=>{V(v,U),Y(v)}).on("mouseout",(Q,v)=>{X(),H(v)})}}}function aK(K,Z,$,U){let J=window.d3;K.scale=K.scale||1;let G=K.width*K.scale,V=K.height*K.scale,X=J.select(`svg#${K.svg_id}`).style("background-color",K.colors.background).attr("width",G).attr("height",V),Y=FK(X),H=Y.select(".radar-legend-column.left"),W=Y.select(".radar-legend-column.right"),F=Y.node().getBoundingClientRect().width||K.width,N=K.legend_column_width*2+60,D=K.legend_column_width*4+80,M=Math.min(D,Math.max(N,F*0.3)),j=Math.min(4,Math.max(2,Math.floor(M/(K.legend_column_width+20))));H.style("gap",`${K.legend_vertical_spacing}px`).style("width",`${M}px`),W.style("gap",`${K.legend_vertical_spacing}px`).style("width",`${M}px`);let z=X.append("g");if("zoomed_quadrant"in K)X.attr("viewBox",I(K.zoomed_quadrant,Z,$));else{let L=V/2+(U.title_height-U.footer_height)/2,P=G/2+K.radar_horizontal_offset;z.attr("transform",q(P,L).concat(`scale(${K.scale})`))}K.font_family=K.font_family||"Arial, Helvetica";let k=z.append("g");return{svg:X,radar:z,legendLeftColumn:H,legendRightColumn:W,grid:k,legendSectionColumns:j}}function eK(K){let $=window.d3.select("body").append("table").attr("class","radar-table").style("border-collapse","collapse").style("position","relative").style("top","-70px").style("margin-left","50px").style("margin-right","50px").style("font-family",K.font_family).style("font-size","13px").style("text-align","left"),U=$.append("thead"),J=$.append("tbody"),G=`${100/K.rings.length}%`;U.append("tr").style("border","1px solid #ddd").selectAll("th").data(K.rings).enter().append("th").style("padding","8px").style("border","1px solid #ddd").style("background-color",(Y)=>Y.color).style("color","#fff").style("width",G).text((Y)=>Y.name),J.append("tr").style("border","1px solid #ddd").selectAll("td").data(K.rings).enter().append("td").style("padding","8px").style("border","1px solid #ddd").style("width",G).text((Y)=>Y.description)}function iK(K){let{demoSlug:Z,getCurrentConfig:$,onConfigImport:U,jsonIO:J}=K;if(!J||!J.importConfig||!J.exportConfig)return console.warn("JSON I/O helpers not available. Toolbar will not be initialized."),h("JSON helpers unavailable.","error"),()=>{};let{importConfig:G,exportConfig:V}=J,X=document.getElementById("jsonImportButton"),Y=document.getElementById("jsonExportButton"),H=document.getElementById("jsonImportInput");if(!X||!Y||!H)return console.warn("Toolbar elements not found in DOM"),()=>{};let W=()=>H.click();X.addEventListener("click",W);let F=G(H,(D)=>{if(U)U(D)},{demoSlug:Z,onSuccess:({fileName:D})=>{h(`Imported ${D||"configuration"} successfully`,"success")},onError:(D)=>{h(D,"error")}}),N=V(Y,$,{demoSlug:Z,onSuccess:({fileName:D})=>{h(`Exported ${D}`,"success")},onError:(D)=>{h(D,"error")}});return()=>{if(X.removeEventListener("click",W),F)F();if(N)N()}}function h(K,Z="info"){let $=document.getElementById("jsonToolbarMessage");if($){if($.textContent=K,$.dataset.state=Z,Z!=="error")setTimeout(()=>{$.textContent="",delete $.dataset.state},3000)}}class x extends Error{constructor(K,Z,$){super(K);this.name="ConfigValidationError",this.field=Z,this.value=$}}function nK(K){let Z=[];if(!K.quadrants||K.quadrants.length<2||K.quadrants.length>8)Z.push(new x(`Number of quadrants must be between 2 and 8 (found: ${K.quadrants?.length||0})`,"quadrants",K.quadrants?.length));if(!K.rings||K.rings.length<4||K.rings.length>8)Z.push(new x(`Number of rings must be between 4 and 8 (found: ${K.rings?.length||0})`,"rings",K.rings?.length));if(K.entries&&K.quadrants&&K.rings)K.entries.forEach(($,U)=>{if($.quadrant<0||$.quadrant>=K.quadrants.length)Z.push(new x(`Entry '${$.label}' has invalid quadrant: ${$.quadrant} (must be 0-${K.quadrants.length-1})`,`entries[${U}].quadrant`,$.quadrant));if($.ring<0||$.ring>=K.rings.length)Z.push(new x(`Entry '${$.label}' has invalid ring: ${$.ring} (must be 0-${K.rings.length-1})`,`entries[${U}].ring`,$.ring))});if(Z.length>0)throw Z[0];return!0}function b(K){jK(K);let Z=zK(K),$=Z.target_outer_radius;nK(K);let U=null;if(K.plugins){let B={getCurrentConfig:()=>K,applyConfig:(_)=>{b(_)},demoSlug:K.demoSlug||K.svg_id||"radar"},E=LK(K.plugins,B);U=E.cleanup,K._pluginInstances=E.plugins}let J=new n(42),G=()=>J.next(),V=(B,E)=>J.between(B,E),X=(B,E)=>J.normalBetween(B,E),Y=K.quadrants.length,H=TK(Y),W=K.rings.length,F=MK(W,$),N=F[F.length-1].radius,D=H.map((B)=>c(B.radial_min*Math.PI,B.radial_max*Math.PI,N));NK(K,N,Y);let M=C,j=PK,z=r;function k(B,E){return o(B,E,H,F,K,V)}new UK(K,H,F,G,V).processEntries(K.entries);let P=Array(Y);for(let B=0;B<Y;B++){P[B]=Array(W);for(let E=0;E<W;E++)P[B][E]=[]}for(let B=0;B<K.entries.length;B++){let E=K.entries[B];P[E.quadrant][E.ring].push(E)}let S=aK(K,H,F,Z),{radar:w,legendLeftColumn:O,legendRightColumn:T,grid:A}=S;if(gK(A,K,H,F,N),!K.footer)K.footer="▲ moved up     ▼ moved down     ★ new     ⬤ no change";if(tK(w,K),K.print_layout)O.style("display","flex"),T.style("display","flex"),oK(O,T,P,K,Y,W,YK,GK,HK,XK);else O.style("display","none").html(""),T.style("display","none").html("");let Q=w.append("g").attr("id","rink"),v=rK(w,K.font_family),R=CK(Q,K.entries,K,YK,GK,HK,XK);if(dK(K.entries,R,K),K.debug_geometry)xK(w,K,H,F,Y,W,P);if(K.print_ring_descriptions_table)eK(K)}var KZ=i();b.jsonIO=KZ,b.initDemoToolbar=iK;var XZ=b;return b}();if(typeof window<"u")window.radar_visualization=g;if(typeof l<"u"&&typeof l.exports<"u")l.exports=g;if(typeof global<"u")global.radar_visualization=g});export default HZ();
