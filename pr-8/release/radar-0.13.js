function radar_visualization(t){t.svg_id=t.svg||"radar",t.width=t.width||1450,t.height=t.height||1e3,t.colors="colors"in t?t.colors:{background:"#fff",grid:"#dddde0",inactive:"#ddd"},t.print_layout=!("print_layout"in t)||t.print_layout,t.links_in_new_tabs=!("links_in_new_tabs"in t)||t.links_in_new_tabs,t.repo_url=t.repo_url||"#",t.print_ring_descriptions_table="print_ring_descriptions_table"in t&&t.print_ring_descriptions_table,t.legend_column_width=t.legend_column_width||140,t.legend_line_height=t.legend_line_height||10;var e=t.print_layout&&t.title?60:0,n=t.print_layout?40:0,r=t.height-e-n,a=t.width;if(t.title_offset=t.title_offset||{x:-a/2+20,y:-t.height/2+30},t.footer_offset=t.footer_offset||{x:-200,y:t.height/2-20},!t.legend_offset){t.legend_offset=[];var l=t.quadrants.length,o=Math.min(a,r)/2-100;if(2===l){var i=a/2-200;t.legend_offset=[{x:-i-25,y:-r/2+110},{x:i,y:-r/2+110}]}else if(4===l){i=o-50;var s=-r/2+110,d=r/2-290;t.legend_offset=[{x:i,y:s},{x:-i-225,y:s},{x:-i-225,y:d},{x:i,y:d}]}else for(var f=0;f<l;f++){var p=-Math.PI+(f+.5)*(2*Math.PI/l);t.legend_offset.push({x:Math.round(o*Math.cos(p)),y:Math.round(o*Math.sin(p))})}}if(!t.quadrants||t.quadrants.length<2||t.quadrants.length>8)throw new Error("Number of quadrants must be between 2 and 8 (found: "+(t.quadrants?t.quadrants.length:0)+")");if(!t.rings||t.rings.length<4||t.rings.length>8)throw new Error("Number of rings must be between 4 and 8 (found: "+(t.rings?t.rings.length:0)+")");for(f=0;f<t.entries.length;f++){if((P=t.entries[f]).quadrant<0||P.quadrant>=t.quadrants.length)throw new Error("Entry '"+P.label+"' has invalid quadrant: "+P.quadrant+" (must be 0-"+(t.quadrants.length-1)+")");if(P.ring<0||P.ring>=t.rings.length)throw new Error("Entry '"+P.label+"' has invalid ring: "+P.ring+" (must be 0-"+(t.rings.length-1)+")")}var c=42;function u(){var t=1e4*Math.sin(c++);return t-Math.floor(t)}function y(t,e){return t+.5*(u()+u())*(e-t)}const h=[],g=t.quadrants.length,_=2/g;for(let t=0;t<g;t++){const e=t*_-1,n=(t+1)*_-1,r=-Math.PI+(t+.5)*_*Math.PI;h.push({radial_min:e,radial_max:n,factor_x:Math.cos(r),factor_y:Math.sin(r)})}const x=[],m=t.rings.length,b=[130,220,310,400];if(4===m)for(let t=0;t<4;t++)x.push({radius:b[t]});else for(let t=0;t<m;t++){const e=t/(m-1)*3,n=Math.floor(e);let r;r=n>=3?400:b[n]+(b[n+1]-b[n])*(e-n),x.push({radius:Math.round(r)})}function v(t){var e=t.x,n=t.y;return{t:Math.atan2(n,e),r:Math.sqrt(e*e+n*n)}}function w(t){return{x:t.r*Math.cos(t.t),y:t.r*Math.sin(t.t)}}function M(t,e,n){var r=Math.min(e,n),a=Math.max(e,n);return Math.min(Math.max(t,r),a)}function k(t,e,n){return{t:t.t,r:M(t.r,e,n)}}function q(t,e,n){return{x:M(t.x,e.x,n.x),y:M(t.y,e.y,n.y)}}function z(t,e){var n={t:h[t].radial_min*Math.PI,r:0===e?30:x[e-1].radius},r={t:h[t].radial_max*Math.PI,r:x[e].radius},a={x:15*h[t].factor_x,y:15*h[t].factor_y},l={x:x[x.length-1].radius*h[t].factor_x,y:x[x.length-1].radius*h[t].factor_y};return{clipx:function(t){var e=k(v(q(t,a,l)),n.r+15,r.r-15);return t.x=w(e).x,t.x},clipy:function(t){var e=k(v(q(t,a,l)),n.r+15,r.r-15);return t.y=w(e).y,t.y},random:function(){return w({t:(t=n.t,e=r.t,t+u()*(e-t)),r:y(n.r,r.r)});var t,e}}}for(f=0;f<t.entries.length;f++){(P=t.entries[f]).segment=z(P.quadrant,P.ring);var I=P.segment.random();P.x=I.x,P.y=I.y,P.color=P.active||t.print_layout?t.rings[P.ring].color:t.colors.inactive}var A=new Array(g);for(let t=0;t<g;t++){A[t]=new Array(m);for(var B=0;B<m;B++)A[t][B]=[]}for(f=0;f<t.entries.length;f++){var P;A[(P=t.entries[f]).quadrant][P.ring].push(P)}var E=1,C=[];if(4===g)C=[2,3,1,0];else{var j=Math.floor(g/2);for(f=0;f<g;f++)C.push((j+f)%g)}for(quadrant of C)for(B=0;B<m;B++){var L=A[quadrant][B];L.sort(function(t,e){return t.label.localeCompare(e.label)});for(f=0;f<L.length;f++)L[f].id=""+E++}function S(t,e){return"translate("+t+","+e+")"}t.scale=t.scale||1;var T=t.width*t.scale,N=t.height*t.scale,O=d3.select("svg#"+t.svg_id).style("background-color",t.colors.background).attr("width",T).attr("height",N),$=O.append("g");if("zoomed_quadrant"in t)O.attr("viewBox",function(t){var e=x[x.length-1].radius;return[Math.max(0,h[t].factor_x*e)-(e+20),Math.max(0,h[t].factor_y*e)-(e+20),e+40,e+40].join(" ")}(t.zoomed_quadrant));else{var D=N/2+(e-n)/2;$.attr("transform",S(T/2,D).concat(`scale(${t.scale})`))}var F=$.append("g");t.font_family=t.font_family||"Arial, Helvetica";var G=x[x.length-1].radius;for(f=0;f<g;f++){p=-Math.PI+2*f*Math.PI/g;F.append("line").attr("x1",0).attr("y1",0).attr("x2",G*Math.cos(p)).attr("y2",G*Math.sin(p)).style("stroke",t.colors.grid).style("stroke-width",1)}var H=F.append("defs").append("filter").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("id","solid");H.append("feFlood").attr("flood-color","rgb(0, 0, 0, 0.8)"),H.append("feComposite").attr("in","SourceGraphic");for(f=0;f<x.length;f++)F.append("circle").attr("cx",0).attr("cy",0).attr("r",x[f].radius).style("fill","none").style("stroke",t.colors.grid).style("stroke-width",1),t.print_layout&&F.append("text").text(t.rings[f].name).attr("y",62-x[f].radius).attr("text-anchor","middle").style("fill",t.rings[f].color).style("opacity",.35).style("font-family",t.font_family).style("font-size","42px").style("font-weight","bold").style("pointer-events","none").style("user-select","none");function J(e,n,r,a=null,l=0){var o=m>=7?3:2,i=Math.ceil(m/o);const s=Math.floor(n/i)*r;let d;return d=null==a?l:l+a*t.legend_line_height,S(t.legend_offset[e].x+s,t.legend_offset[e].y+d)}if(t.print_layout){$.append("a").attr("href",t.repo_url).attr("transform",S(t.title_offset.x,t.title_offset.y)).append("text").attr("class","hover-underline").text(t.title).style("font-family",t.font_family).style("font-size","30").style("font-weight","bold"),$.append("text").attr("transform",S(t.title_offset.x,t.title_offset.y+20)).text(t.date||"").style("font-family",t.font_family).style("font-size","14").style("fill","#999"),$.append("text").attr("transform",S(t.footer_offset.x,t.footer_offset.y)).text("▲ moved up     ▼ moved down     ★ new     ⬤ no change").attr("xml:space","preserve").style("font-family",t.font_family).style("font-size","12px");const e=$.append("g");for(let n=0;n<g;n++){e.append("text").attr("transform",S(t.legend_offset[n].x,t.legend_offset[n].y-45)).text(t.quadrants[n].name).style("font-family",t.font_family).style("font-size","18px").style("font-weight","bold");var K=m>=7?3:2,Q=Math.ceil(m/K),R=new Array(K).fill(0);for(let r=0;r<m;r++){var U=Math.floor(r/Q),V=r%Q,W=R[U];V>0&&(W+=36),e.append("text").attr("transform",J(n,r,t.legend_column_width,null,W)).text(t.rings[r].name).style("font-family",t.font_family).style("font-size","12px").style("font-weight","bold").style("fill",t.rings[r].color);var X=W+=20;e.selectAll(".legend"+n+r).data(A[n][r]).enter().append("a").attr("href",function(t,e){return t.link?t.link:"#"}).attr("target",function(e,n){return e.link&&t.links_in_new_tabs?"_blank":null}).append("text").attr("transform",function(e,a){return J(n,r,t.legend_column_width,a,X)}).attr("class","legend"+n+r).attr("id",function(t,e){return"legendItem"+t.id}).text(function(t){return t.id+". "+t.label}).style("font-family",t.font_family).style("font-size","11px").on("mouseover",function(t,e){et(e),rt(e)}).on("mouseout",function(t,e){nt(e),at(e)}).call(Y).each(function(){W+=d3.select(this).node().getBBox().height}),R[U]=W}}}function Y(e){let n=0;e.each(function(){const e=d3.select(this),r=e.text().split(" ");let a=[];const l=`${e.text().split(".")[0]}. |`,o=e.append("tspan").text(l),i=e.append("tspan").text("|"),s=o.node().getComputedTextLength()-i.node().getComputedTextLength();e.text(null);let d=e.append("tspan").attr("x",0).attr("y",n).attr("dy",0);for(let n=0;n<r.length;n++)a.push(r[n]),d.text(a.join(" ")),d.node().getComputedTextLength()>t.legend_column_width&&1!==n&&(a.pop(),d.text(a.join(" ")),a=[r[n]],d=e.append("tspan").attr("x",s).attr("dy",t.legend_line_height).text(r[n]));const f=e.node().getBBox();n=f.y+f.height})}var Z=$.append("g").attr("id","rink"),tt=$.append("g").attr("id","bubble").attr("x",0).attr("y",0).style("opacity",0).style("pointer-events","none").style("user-select","none");function et(e){if(e.active||t.print_layout){var n=d3.select("#bubble text").text(e.label).node().getBBox();d3.select("#bubble").attr("transform",S(e.x-n.width/2,e.y-16)).style("opacity",.8),d3.select("#bubble rect").attr("x",-5).attr("y",-n.height).attr("width",n.width+10).attr("height",n.height+4),d3.select("#bubble path").attr("transform",S(n.width/2-5,3))}}function nt(t){d3.select("#bubble").attr("transform",S(0,0)).style("opacity",0)}function rt(t){var e=document.getElementById("legendItem"+t.id);e.setAttribute("filter","url(#solid)"),e.setAttribute("fill","white")}function at(t){var e=document.getElementById("legendItem"+t.id);e.removeAttribute("filter"),e.removeAttribute("fill")}tt.append("rect").attr("rx",4).attr("ry",4).style("fill","#333"),tt.append("text").style("font-family",t.font_family).style("font-size","10px").style("fill","#fff"),tt.append("path").attr("d","M 0,0 10,0 5,8 z").style("fill","#333");var lt,ot,it,st,dt=Z.selectAll(".blip").data(t.entries).enter().append("g").attr("class","blip").attr("transform",function(e,n){return J(e.quadrant,e.ring,t.legend_column_width,n)}).on("mouseover",function(t,e){et(e),rt(e)}).on("mouseout",function(t,e){nt(),at(e)});dt.each(function(e){var n=d3.select(this);if(e.active&&Object.prototype.hasOwnProperty.call(e,"link")&&e.link&&(n=n.append("a").attr("xlink:href",e.link),t.links_in_new_tabs&&n.attr("target","_blank")),1==e.moved?n.append("path").attr("d","M -11,5 11,5 0,-13 z").style("fill",e.color):-1==e.moved?n.append("path").attr("d","M -11,-5 11,-5 0,13 z").style("fill",e.color):2==e.moved?n.append("path").attr("d",d3.symbol().type(d3.symbolStar).size(200)).style("fill",e.color):n.append("circle").attr("r",9).attr("fill",e.color),e.active||t.print_layout){var r=t.print_layout?e.id:e.label.match(/[a-z]/i);n.append("text").text(r).attr("y",3).attr("text-anchor","middle").style("fill","#fff").style("font-family",t.font_family).style("font-size",function(t){return r.length>2?"8px":"9px"}).style("pointer-events","none").style("user-select","none")}}),d3.forceSimulation().nodes(t.entries).velocityDecay(.19).force("collision",d3.forceCollide().radius(12).strength(.85)).on("tick",function(){dt.attr("transform",function(t){return S(t.segment.clipx(t),t.segment.clipy(t))})}),t.print_ring_descriptions_table&&(lt=d3.select("body").append("table").attr("class","radar-table").style("border-collapse","collapse").style("position","relative").style("top","-70px").style("margin-left","50px").style("margin-right","50px").style("font-family",t.font_family).style("font-size","13px").style("text-align","left"),ot=lt.append("thead"),it=lt.append("tbody"),st=100/t.rings.length+"%",ot.append("tr").style("border","1px solid #ddd").selectAll("th").data(t.rings).enter().append("th").style("padding","8px").style("border","1px solid #ddd").style("background-color",t=>t.color).style("color","#fff").style("width",st).text(t=>t.name),it.append("tr").style("border","1px solid #ddd").selectAll("td").data(t.rings).enter().append("td").style("padding","8px").style("border","1px solid #ddd").style("width",st).text(t=>t.description))}