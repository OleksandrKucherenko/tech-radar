var sK=(I,R)=>()=>(R||I((R={exports:{}}).exports,R),R.exports);var tK=sK((rK,b)=>{var l=function(){function I(K,Z){return`translate(${K},${Z})`}function R(K,Z,$){let J=$[$.length-1].radius,H=20;return[Math.max(0,Z[K].factor_x*J)-(J+20),Math.max(0,Z[K].factor_y*J)-(J+20),J+40,J+40].join(" ")}function $K(K,Z,$){if($.legend_offset)return $.legend_offset;let J=Array(K),H=Z*0.08,Y=-Z-$.legend_column_width+H,X=Z-H,j=[],U=[];for(let V=0;V<K;V++)(V%2===0?U:j).push(V);let G=-Z+80,F=2*Z-160;function D(V){if(V<=1)return 0;return Math.max($.legend_vertical_spacing,F/(V-1))}function k(V,N){let T=D(V.length);for(let z=0;z<V.length;z++){let M=V[z];J[M]={x:N,y:G+z*T}}}return k(j,Y),k(U,X),J}function HK(K){let Z=K.node().closest(".radar-layout");if(Z)return K.select(()=>Z);let $=K.node(),J=$.parentNode,H=document.createElement("div");H.className="radar-layout";let Y=document.createElement("div");Y.className="radar-legend-column left";let X=document.createElement("div");X.className="radar-svg-container";let j=document.createElement("div");return j.className="radar-legend-column right",J.insertBefore(H,$),X.appendChild($),H.appendChild(Y),H.appendChild(X),H.appendChild(j),K.select(()=>H)}function JK(K){K.svg_id=K.svg||"radar",K.width=K.width||1450,K.height=K.height||1000,K.colors="colors"in K?K.colors:{background:"#fff",grid:"#dddde0",inactive:"#ddd"},K.print_layout="print_layout"in K?K.print_layout:!0,K.links_in_new_tabs="links_in_new_tabs"in K?K.links_in_new_tabs:!0,K.repo_url=K.repo_url||"#",K.print_ring_descriptions_table="print_ring_descriptions_table"in K?K.print_ring_descriptions_table:!1,K.legend_column_width=K.legend_column_width||140,K.legend_line_height=K.legend_line_height||10,K.segment_radial_padding="segment_radial_padding"in K?K.segment_radial_padding:16,K.segment_angular_padding="segment_angular_padding"in K?K.segment_angular_padding:12,K.chart_padding="chart_padding"in K?K.chart_padding:60,K.blip_collision_radius="blip_collision_radius"in K?K.blip_collision_radius:14,K.legend_vertical_spacing=K.legend_vertical_spacing||20,K.radar_horizontal_offset="radar_horizontal_offset"in K?K.radar_horizontal_offset:Math.round(K.legend_column_width*0.25),K.debug_geometry="debug_geometry"in K?K.debug_geometry:!1;let Z=window.innerWidth||document.documentElement.clientWidth,$=window.innerHeight||document.documentElement.clientHeight;if(Z<1024&&!K.scale){let Y=Math.min(Z/1450,$/1000);K.scale=Math.max(0.5,Math.min(1,Y))}let J=K.quadrants.length,H=K.rings.length;if(J>=5||H>=6){let Y=1+(J-4)*0.05+(H-4)*0.03;if(!K.width_override)K.width=Math.round(K.width*Math.min(Y,1.3));if(!K.height_override)K.height=Math.round(K.height*Math.min(Y,1.3));if(J>=7||H>=7)K.blip_collision_radius=Math.max(10,K.blip_collision_radius*0.9)}}function UK(K){let Z=K.print_layout&&K.title?60:0,$=K.print_layout?40:0,J=2*K.chart_padding+40,H=Math.max(J,K.height-Z-$),Y=Math.max(2*K.chart_padding+40,K.width),X=Math.min(Y,H)/2-K.chart_padding,j=Math.max(10,X);return{title_height:Z,footer_height:$,available_height:H,available_width:Y,target_outer_radius:j}}function YK(K,Z,$){if(!K.title_offset)K.title_offset={x:-Z,y:-Z-40};if(!K.footer_offset)K.footer_offset={x:-Z,y:Z+60};K.legend_offset=$K($,Z,K)}function GK(K){let Z=[],$=2/K,J=K===2?-0.5:0;for(let H=0;H<K;H++){let Y=-1+H*$+J,X=-1+(H+1)*$+J,j=-Math.PI+(H+0.5)*$*Math.PI+J*Math.PI;Z.push({radial_min:Y,radial_max:X,factor_x:Math.cos(j),factor_y:Math.sin(j)})}return Z}function p(K,Z,$){let J=2*Math.PI,H=K,Y=Z;while(Y<=H)Y+=J;let X=[-Math.PI,-Math.PI/2,0,Math.PI/2,Math.PI,3*Math.PI/2,2*Math.PI],j=[H,Y];X.forEach((V)=>{let N=V;while(N<H)N+=J;if(N<=Y)j.push(N)});let U=1/0,G=-1/0,F=1/0,D=-1/0;j.forEach((V)=>{let N=Math.cos(V),T=Math.sin(V);U=Math.min(U,N),G=Math.max(G,N),F=Math.min(F,T),D=Math.max(D,T)});let k=20;return{min:{x:U*$-k,y:F*$-k},max:{x:G*$+k,y:D*$+k}}}function XK(K){if(K===4)return[2,3,1,0];let Z=[],$=Math.floor(K/2);for(let J=0;J<K;J++)Z.push(($+J)%K);return Z}var y=[130,220,310,400],c=400;function jK(K,Z){let $=[];if(K===4)for(let H=0;H<4;H++)$.push(y[H]);else for(let H=0;H<K;H++){let Y=H/(K-1)*3,X=Math.floor(Y),j=Y-X,U;if(X>=3)U=c;else U=y[X]+(y[X+1]-y[X])*j;$.push(U)}let J=Z/c;return $.map((H)=>({radius:Math.max(10,Math.round(H*J))}))}function FK(K){let{x:Z,y:$}=K;return{t:Math.atan2($,Z),r:Math.sqrt(Z*Z+$*$)}}function _(K){let{r:Z,t:$}=K;return{x:Z*Math.cos($),y:Z*Math.sin($)}}function v(K,Z,$){let J=Math.min(Z,$),H=Math.max(Z,$);return Math.min(Math.max(K,J),H)}function DK(K,Z,$){return{t:K.t,r:v(K.r,Z,$)}}function u(K,Z,$){return{x:v(K.x,Z.x,$.x),y:v(K.y,Z.y,$.y)}}function s(K,Z,$,J,H,Y){let X=$[K].radial_min*Math.PI,j=$[K].radial_max*Math.PI,U=Z===0?30:J[Z-1].radius,G=J[Z].radius,F=U+H.segment_radial_padding,D=G-H.segment_radial_padding;if(D<=F){let O=(U+G)/2;F=Math.max(0,O-1),D=O+1}let k=(F+D)/2,V=H.segment_angular_padding/Math.max(k,1),N=Math.max(0,(j-X)/2-0.01);V=Math.min(V,N);let T=X+V,z=j-V;if(z<=T)T=X,z=j;let M=p(T,z,D),Q=M.min,S=M.max;function B(O){let W=u(O,Q,S),E=FK(W);return E.r=v(E.r,F,D),E.t=v(E.t,T,z),_(E)}function w(O){let W=B({x:O.x,y:O.y});return O.x=W.x,O.y=W.y,W}return{clipx:(O)=>{return w(O).x},clipy:(O)=>{return w(O).y},clip:(O)=>{let W=B({x:O.x,y:O.y});return O.x=W.x,O.y=W.y,W},random:()=>_({t:Y(T,z),r:Y(F,D)})}}var h={demoSlug:"tech-radar",onError:(K)=>{if(typeof window<"u"&&typeof window.alert==="function")window.alert(K);else console.error(K)},onSuccess:()=>{}},t={read:"Failed to read the selected file. Please try again.",parse:"The selected file is not valid JSON. Please choose a valid radar configuration."};function o(K={}){let Z={...h,...K};return Z.onError=typeof K.onError==="function"?K.onError:h.onError,Z.onSuccess=typeof K.onSuccess==="function"?K.onSuccess:h.onSuccess,Z}function VK(K=new Date){let Z=(U)=>U.toString().padStart(2,"0"),$=K.getFullYear(),J=K.getMonth()+1,H=K.getDate(),Y=K.getHours(),X=K.getMinutes(),j=K.getSeconds();return`${$}${Z(J)}${Z(H)}-${Z(Y)}${Z(X)}${Z(j)}`}function WK(K,Z){let $=new Blob([K],{type:"application/json"}),H=(typeof window<"u"&&window.URL?window.URL:URL).createObjectURL($),Y=document.createElement("a");return Y.download=Z,Y.href=H,{link:Y,url:H}}function x(K,Z){Z.onError(K)}function NK(K,Z,$={}){if(!K)throw Error("exportConfig requires a button element");if(typeof Z!=="function")throw Error("exportConfig requires a config provider function");let J=o($),H=J.demoSlug||h.demoSlug,Y=async()=>{try{let X=await Z();if(!X)throw Error("No radar configuration is available to export.");let j=JSON.stringify(X,null,2),U=VK(),G=`${H}-${U}.json`,{link:F,url:D}=WK(j,G);F.click(),(typeof window<"u"&&window.URL?window.URL:URL).revokeObjectURL(D),J.onSuccess({fileName:G})}catch(X){x(X.message||"Unable to export JSON.",J)}};return K.addEventListener("click",Y),()=>K.removeEventListener("click",Y)}function zK(K,Z,$={}){if(!K)throw Error("importConfig requires a file input element");if(typeof Z!=="function")throw Error("importConfig requires an applyConfig callback");let J=o($),H=(Y)=>{let[X]=Y.target.files||[];if(!X)return;let j=new FileReader;j.onload=async(U)=>{let G;try{G=JSON.parse(U.target.result)}catch(F){x(t.parse,J),K.value="";return}try{await Z(G),J.onSuccess({fileName:X.name})}catch(F){x(F.message||"Unable to import configuration.",J)}finally{K.value=""}},j.onerror=()=>{x(t.read,J),K.value=""},j.readAsText(X)};return K.addEventListener("change",H),()=>K.removeEventListener("change",H)}function TK(){return{exportConfig:NK,importConfig:zK}}class d{constructor(K=42){this.seed=K,this.initialSeed=K}next(){let K=Math.sin(this.seed++)*1e4;return K-Math.floor(K)}between(K,Z){return K+this.next()*(Z-K)}normalBetween(K,Z){return K+(this.next()+this.next())*0.5*(Z-K)}reset(K){this.seed=K!==void 0?K:this.initialSeed}}class g{constructor(K,Z,$,J,H){this.config=K,this.quadrants=Z,this.rings=$,this.randomNext=J,this.randomBetween=H,this.numQuadrants=Z.length,this.numRings=$.length}processEntries(K){let Z=this.segmentEntries(K);return this.assignSegmentsAndColors(K),this.positionEntries(Z),this.assignIds(Z),this.calculateCollisionRadii(Z),K}segmentEntries(K){let Z=Array(this.numQuadrants);for(let $=0;$<this.numQuadrants;$++){Z[$]=Array(this.numRings);for(let J=0;J<this.numRings;J++)Z[$][J]=[]}for(let $=0;$<K.length;$++){let J=K[$];Z[J.quadrant][J.ring].push(J)}return Z}assignSegmentsAndColors(K){for(let Z=0;Z<K.length;Z++){let $=K[Z];$.segment=s($.quadrant,$.ring,this.quadrants,this.rings,this.config,this.randomBetween),$.color=$.active||this.config.print_layout?this.config.rings[$.ring].color:this.config.colors.inactive}}positionEntries(K){for(let Z=0;Z<this.numQuadrants;Z++)for(let $=0;$<this.numRings;$++)this.gridPosition(K[Z][$],Z,$)}gridPosition(K,Z,$){if(K.length===0)return;let J=this.quadrants[Z].radial_min*Math.PI,H=this.quadrants[Z].radial_max*Math.PI,Y=$===0?30:this.rings[$-1].radius,X=this.rings[$].radius,j=Y+this.config.segment_radial_padding,U=X-this.config.segment_radial_padding;if(U<=j){let P=(Y+X)/2;j=Math.max(0,P-1),U=P+1}let G=(j+U)/2,F=this.config.segment_angular_padding/Math.max(G,1),D=Math.max(0,(H-J)/2-0.01);F=Math.min(F,D);let k=J+F,N=H-F-k,T=U-j,z=K.length,Q=N*($===0?j:G),S=T,B=this.config.blip_collision_radius||14,w=Math.max(3,Math.floor(Q/(B*0.7))),O=Math.max(3,Math.floor(S/(B*0.7))),W,E,A=Math.ceil(Math.sqrt(z)),C=Q/Math.max(S,1);if(z===1)W=1,E=1;else if(z<=4)W=Math.min(z,w),E=Math.ceil(z/W);else{if(C>2)W=Math.min(w,Math.ceil(A*1.5)),E=Math.ceil(z/W);else if(C>1)W=Math.min(w,Math.ceil(A*1.2)),E=Math.ceil(z/W);else if(C<0.5)W=Math.min(w,Math.max(3,Math.floor(A*($===0?0.85:0.7)))),E=Math.ceil(z/W);else W=Math.min(w,Math.max(3,A)),E=Math.ceil(z/W);W=Math.max(2,Math.min(W,w)),E=Math.max(2,Math.min(E,O))}for(let P=0;P<K.length;P++){let L=K[P],n=P%W,f=Math.floor(P/W);if(f>=E){let uK=W*E,ZK=P%uK;n=ZK%W,f=Math.floor(ZK/W)}let mK=(n+0.15+this.randomNext()*0.7)/W,fK=(f+0.15+this.randomNext()*0.7)/E,lK=k+mK*N,cK=j+fK*T,KK=_({t:lK,r:cK});L.x=KK.x,L.y=KK.y}}assignIds(K){let Z=1,$=XK(this.numQuadrants);for(let J of $)for(let H=0;H<this.numRings;H++){let Y=K[J][H];Y.sort((X,j)=>X.label.localeCompare(j.label));for(let X=0;X<Y.length;X++)Y[X].id=`${Z++}`}}calculateCollisionRadii(K){for(let Z=0;Z<this.numQuadrants;Z++)for(let $=0;$<this.numRings;$++){let J=K[Z][$];if(J.length===0)continue;let H=$===0?30:this.rings[$-1].radius,Y=this.rings[$].radius,X=H+this.config.segment_radial_padding,j=Y-this.config.segment_radial_padding;if(j<=X){let T=(H+Y)/2;X=Math.max(0,T-1),j=T+1}let U=(this.quadrants[Z].radial_max-this.quadrants[Z].radial_min)*Math.PI,G=(X+j)/2,F=j-X,k=U*G*F/J.length,V=Math.sqrt(k/Math.PI)*0.55,N=Math.max(12,V);if(J.length>10)N=Math.max(N,13);if(J.length>15)N=Math.max(N,14);if($===0&&this.numQuadrants>=6)N=Math.max(10,N*0.9);for(let T=0;T<J.length;T++)J[T].collision_radius=N}}}function kK(K,Z,$,J,H,Y,X){let j=window.d3,U=K.selectAll(".blip").data(Z).enter().append("g").attr("class","blip").attr("transform",(G)=>I(G.x,G.y)).on("mouseover",(G,F)=>{J(F,$),Y(F)}).on("mouseout",(G,F)=>{H(),X(F)});return U.each(function(G){let F=j.select(this),D=F;if(G.active&&Object.hasOwn(G,"link")&&G.link){if(D=F.append("a").attr("xlink:href",G.link),$.links_in_new_tabs)D.attr("target","_blank")}MK(D,G),PK(D,G,$)}),U}function MK(K,Z){let $=window.d3;if(Z.moved===1)K.append("path").attr("d","M -11,5 11,5 0,-13 z").style("fill",Z.color);else if(Z.moved===-1)K.append("path").attr("d","M -11,-5 11,-5 0,13 z").style("fill",Z.color);else if(Z.moved===2)K.append("path").attr("d",$.symbol().type($.symbolStar).size(200)).style("fill",Z.color);else K.append("circle").attr("r",9).attr("fill",Z.color)}function PK(K,Z,$){if(Z.active||$.print_layout){let J=$.print_layout?Z.id:Z.label.match(/[a-z]/i);K.append("text").text(J).attr("y",3).attr("text-anchor","middle").style("fill","#fff").style("font-family",$.font_family).style("font-size",(H)=>J.length>2?"8px":"9px").style("pointer-events","none").style("user-select","none")}}function OK(K,Z,$,J,H,Y,X){let j=window.d3,U=K.append("g").attr("id","debug-layer"),G=J[J.length-1].radius;EK(U,Z,$,J,H,Y,X),SK(U,Z.entries,Z.blip_collision_radius),LK(U,G),QK(U,H,G),CK(U,G)}function EK(K,Z,$,J,H,Y,X){let j=window.d3;for(let U=0;U<H;U++)for(let G=0;G<Y;G++){let F=G===0?30:J[G-1].radius,D=J[G].radius,k=F+Z.segment_radial_padding,V=D-Z.segment_radial_padding,N=(k+V)/2,T=Z.segment_angular_padding/Math.max(N,1),z=$[U].radial_min*Math.PI,M=$[U].radial_max*Math.PI,Q=Math.max(0,(M-z)/2-0.01);T=Math.min(T,Q);let S=z+T,B=M-T;if(B<=S)S=z,B=M;if(wK(K,k,V,S,B,H,G),BK(K,$[U].radial_min*Math.PI,$[U].radial_max*Math.PI,V),G===0)AK(K,U,G,S,B,k,V,X[U][G].length)}}function wK(K,Z,$,J,H,Y,X){let j=window.d3,U=Math.PI/(2*Y),G=Y%4===1?U:-U,F=j.arc().innerRadius(Z).outerRadius($).startAngle(-H+G).endAngle(-J+G);K.append("path").attr("d",F).attr("fill","none").attr("stroke",X===0?"#ff0000":"#00ffff").attr("stroke-width",X===0?2:1).attr("stroke-dasharray","5,5").attr("opacity",0.5)}function BK(K,Z,$,J){let H=p(Z,$,J);K.append("rect").attr("x",H.min.x).attr("y",H.min.y).attr("width",H.max.x-H.min.x).attr("height",H.max.y-H.min.y).attr("fill","none").attr("stroke","#ffff00").attr("stroke-width",1).attr("stroke-dasharray","3,3").attr("opacity",0.3)}function AK(K,Z,$,J,H,Y,X,j){let U=(J+H)/2,G=(Y+X)/2,F=Math.cos(U)*G,D=Math.sin(U)*G,k=(H-J)*Y;K.append("text").attr("x",F).attr("y",D).attr("text-anchor","middle").attr("font-size","10px").attr("fill","#ff0000").attr("font-weight","bold").text(`Q${Z}R${$}: ${j} items, arc=${k.toFixed(0)}px`)}function SK(K,Z,$){let J=window.d3;K.append("g").attr("id","debug-collision-radii").selectAll("circle").data(Z).enter().append("circle").attr("cx",(H)=>H.x).attr("cy",(H)=>H.y).attr("r",(H)=>H.collision_radius||$).attr("fill","none").attr("stroke",(H)=>H.ring===0?"#00ff00":"#0000ff").attr("stroke-width",1).attr("stroke-dasharray","2,2").attr("opacity",0.4)}function LK(K,Z){K.append("line").attr("x1",-Z).attr("y1",0).attr("x2",Z).attr("y2",0).attr("stroke","#666").attr("stroke-width",0.5).attr("opacity",0.3),K.append("line").attr("x1",0).attr("y1",-Z).attr("x2",0).attr("y2",Z).attr("stroke","#666").attr("stroke-width",0.5).attr("opacity",0.3)}function QK(K,Z,$){for(let J=0;J<Z;J++){let H=-Math.PI+J*2*Math.PI/Z;K.append("line").attr("x1",0).attr("y1",0).attr("x2",$*Math.cos(H)).attr("y2",$*Math.sin(H)).attr("stroke","#ff00ff").attr("stroke-width",2).attr("opacity",0.6).attr("stroke-dasharray","10,5")}}function CK(K,Z){let $=K.append("g").attr("transform",I(-Z+10,-Z+10));[{y:0,text:"DEBUG MODE",color:"#000",bold:!0,fontSize:"11px"},{y:15,text:"━━ Ring 0 polar sector",color:"#ff0000",bold:!1,fontSize:"9px"},{y:28,text:"━━ Other rings polar sector",color:"#00ffff",bold:!1,fontSize:"9px"},{y:41,text:"━━ Cartesian bounding box",color:"#ffff00",bold:!1,fontSize:"9px"},{y:54,text:"○ Collision radius (Ring 0)",color:"#00ff00",bold:!1,fontSize:"9px"}].forEach((H)=>{$.append("text").attr("x",0).attr("y",H.y).attr("font-size",H.fontSize).attr("font-weight",H.bold?"bold":"normal").attr("fill",H.color).text(H.text)})}function IK(K,Z){let $=window.d3;return function(){if(K.attr("transform",(H)=>{let Y=H.segment.clip(H);return H.rendered_x=Y.x,H.rendered_y=Y.y,I(Y.x,Y.y)}),Z.debug_geometry)$.select("#debug-collision-radii").selectAll("circle").attr("cx",(H)=>H.x).attr("cy",(H)=>H.y)}}function RK(K,Z,$){let J=window.d3,H=IK(Z,$);J.forceSimulation().nodes(K).velocityDecay(0.15).alphaDecay(0.008).alphaMin(0.00005).force("collision",J.forceCollide().radius((Y)=>Y.collision_radius||$.blip_collision_radius).strength(1).iterations(6)).on("tick",H).tick(400)}function vK(K,Z,$,J,H){let Y=$.length;for(let U=0;U<Y;U++){let G=-Math.PI+U*2*Math.PI/Y;K.append("line").attr("x1",0).attr("y1",0).attr("x2",H*Math.cos(G)).attr("y2",H*Math.sin(G)).attr("class",`quadrant-line quadrant-line-${U}`).style("stroke",Z.colors.grid).style("stroke-width",1.5).style("stroke-opacity",0.3)}let j=K.append("defs").append("filter").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("id","solid");j.append("feFlood").attr("flood-color","rgb(0, 0, 0, 0.8)"),j.append("feComposite").attr("in","SourceGraphic");for(let U=0;U<J.length;U++){let G=J[U].radius,F=U===0?0:J[U-1].radius,D=Math.max(G-F,1),k=G-D/2,V=Math.max(12,Math.min(32,D*0.45));if(U>0)K.append("circle").attr("cx",0).attr("cy",0).attr("r",G).attr("class",`ring ring-${U}`).style("fill",U%2===0?"rgba(0, 0, 0, 0.01)":"rgba(0, 0, 0, 0.015)").style("stroke","none").style("pointer-events","none");if(K.append("circle").attr("cx",0).attr("cy",0).attr("r",G).attr("class",`ring-border ring-border-${U}`).style("fill","none").style("stroke",Z.colors.grid).style("stroke-width",U===0?2:1).style("stroke-opacity",U===0?0.4:0.25),Z.print_layout)K.append("text").text(Z.rings[U].name).attr("y",-k).attr("text-anchor","middle").attr("dominant-baseline","middle").style("fill",Z.rings[U].color).style("opacity",0.35).style("font-family",Z.font_family).style("font-size",`${V}px`).style("font-weight","bold").style("pointer-events","none").style("user-select","none")}}function qK(K,Z){if(Z.title&&Z.print_layout){let $=K.append("a").attr("href",Z.repo_url).attr("target",Z.links_in_new_tabs?"_blank":null);$.append("text").attr("transform",`translate(${Z.title_offset.x}, ${Z.title_offset.y})`).text(Z.title).style("font-family",Z.font_family).style("font-size","34px").style("font-weight","bold"),$.append("text").attr("transform",`translate(${Z.title_offset.x}, ${Z.title_offset.y+30})`).text(Z.date?Z.date:"").style("font-family",Z.font_family).style("font-size","14px").style("fill","#999")}if(Z.footer&&Z.print_layout)K.append("text").attr("transform",`translate(${Z.footer_offset.x}, ${Z.footer_offset.y})`).text(Z.footer).attr("xml:space","preserve").style("font-family",Z.font_family).style("font-size","10px").style("fill","#999")}function yK(K,Z){let $=K.append("g").attr("id","bubble").attr("x",0).attr("y",0).style("opacity",0).style("pointer-events","none").style("user-select","none");return $.append("rect").attr("rx",4).attr("ry",4).style("fill","#333"),$.append("text").style("font-family",Z).style("font-size","10px").style("fill","#fff"),$.append("path").attr("d","M 0,0 10,0 5,8 z").style("fill","#333"),$}function r(K,Z){if(K.active||Z.print_layout){let $=window.d3,H=$.select("#bubble text").text(K.label).node().getBBox(),Y=K.rendered_x!==void 0?K.rendered_x:K.x,X=K.rendered_y!==void 0?K.rendered_y:K.y;$.select("#bubble").attr("transform",I(Y-H.width/2,X-16)).style("opacity",0.8),$.select("#bubble rect").attr("x",-5).attr("y",-H.height).attr("width",H.width+10).attr("height",H.height+4),$.select("#bubble path").attr("transform",I(H.width/2-5,3))}}function a(){window.d3.select("#bubble").attr("transform",I(0,0)).style("opacity",0)}function e(K){let Z=document.getElementById(`legendItem${K.id}`);if(Z)Z.classList.add("legend-highlight")}function i(K){let Z=document.getElementById(`legendItem${K.id}`);if(Z)Z.classList.remove("legend-highlight")}function hK(K,Z,$,J,H,Y,X,j,U,G){K.html(""),Z.html("");let F=Y>=7?3:2,D=Math.ceil(H/2),k=Math.floor(H/2),V=H-2,N=[],T=[];for(let M=0;M<D;M++)T.push((V+M)%H);for(let M=0;M<k;M++)N.push((V-1-M+H)%H);function z(M){return N.includes(M)?K:Z}for(let M=0;M<H;M++){let S=z(M).append("div").attr("class","legend-section").style("--legend-columns",F);S.append("div").attr("class","legend-quadrant-name").text(J.quadrants[M].name);let B=S.append("div").attr("class","legend-rings");for(let w=0;w<Y;w++){let O=$[M][w];if(!O.length)continue;let W=B.append("div").attr("class","legend-ring");W.append("div").attr("class","legend-ring-name").style("color",J.rings[w].color).text(J.rings[w].name),W.append("div").attr("class","legend-ring-entries").selectAll("a").data(O).enter().append("a").attr("href",(A)=>A.link?A.link:"#").attr("target",(A)=>A.link&&J.links_in_new_tabs?"_blank":null).attr("id",(A)=>`legendItem${A.id}`).attr("class","legend-entry").text((A)=>`${A.id}. ${A.label}`).on("mouseover",(A,C)=>{X(C,J),U(C)}).on("mouseout",(A,C)=>{j(),G(C)})}}}function xK(K,Z,$,J){let H=window.d3;K.scale=K.scale||1;let Y=K.width*K.scale,X=K.height*K.scale,j=H.select(`svg#${K.svg_id}`).style("background-color",K.colors.background).attr("width",Y).attr("height",X),U=HK(j),G=U.select(".radar-legend-column.left"),F=U.select(".radar-legend-column.right"),D=U.node().getBoundingClientRect().width||K.width,k=K.legend_column_width*2+60,V=K.legend_column_width*4+80,N=Math.min(V,Math.max(k,D*0.3)),T=Math.min(4,Math.max(2,Math.floor(N/(K.legend_column_width+20))));G.style("gap",`${K.legend_vertical_spacing}px`).style("width",`${N}px`),F.style("gap",`${K.legend_vertical_spacing}px`).style("width",`${N}px`);let z=j.append("g");if("zoomed_quadrant"in K)j.attr("viewBox",R(K.zoomed_quadrant,Z,$));else{let Q=X/2+(J.title_height-J.footer_height)/2,S=Y/2+K.radar_horizontal_offset;z.attr("transform",I(S,Q).concat(`scale(${K.scale})`))}K.font_family=K.font_family||"Arial, Helvetica";let M=z.append("g");return{svg:j,radar:z,legendLeftColumn:G,legendRightColumn:F,grid:M,legendSectionColumns:T}}function bK(K){let $=window.d3.select("body").append("table").attr("class","radar-table").style("border-collapse","collapse").style("position","relative").style("top","-70px").style("margin-left","50px").style("margin-right","50px").style("font-family",K.font_family).style("font-size","13px").style("text-align","left"),J=$.append("thead"),H=$.append("tbody"),Y=`${100/K.rings.length}%`;J.append("tr").style("border","1px solid #ddd").selectAll("th").data(K.rings).enter().append("th").style("padding","8px").style("border","1px solid #ddd").style("background-color",(U)=>U.color).style("color","#fff").style("width",Y).text((U)=>U.name),H.append("tr").style("border","1px solid #ddd").selectAll("td").data(K.rings).enter().append("td").style("padding","8px").style("border","1px solid #ddd").style("width",Y).text((U)=>U.description)}class q extends Error{constructor(K,Z,$){super(K);this.name="ConfigValidationError",this.field=Z,this.value=$}}function pK(K){let Z=[];if(!K.quadrants||K.quadrants.length<2||K.quadrants.length>8)Z.push(new q(`Number of quadrants must be between 2 and 8 (found: ${K.quadrants?.length||0})`,"quadrants",K.quadrants?.length));if(!K.rings||K.rings.length<4||K.rings.length>8)Z.push(new q(`Number of rings must be between 4 and 8 (found: ${K.rings?.length||0})`,"rings",K.rings?.length));if(K.entries&&K.quadrants&&K.rings)K.entries.forEach(($,J)=>{if($.quadrant<0||$.quadrant>=K.quadrants.length)Z.push(new q(`Entry '${$.label}' has invalid quadrant: ${$.quadrant} (must be 0-${K.quadrants.length-1})`,`entries[${J}].quadrant`,$.quadrant));if($.ring<0||$.ring>=K.rings.length)Z.push(new q(`Entry '${$.label}' has invalid ring: ${$.ring} (must be 0-${K.rings.length-1})`,`entries[${J}].ring`,$.ring))});if(Z.length>0)throw Z[0];return!0}function m(K){JK(K);let Z=UK(K),$=Z.target_outer_radius;pK(K);let J=new d(42),H=()=>J.next(),Y=(P,L)=>J.between(P,L),X=(P,L)=>J.normalBetween(P,L),j=K.quadrants.length,U=GK(j),G=K.rings.length,F=jK(G,$),D=F[F.length-1].radius,k=U.map((P)=>p(P.radial_min*Math.PI,P.radial_max*Math.PI,D));YK(K,D,j);let V=v,N=DK,T=u;function z(P,L){return s(P,L,U,F,K,Y)}new g(K,U,F,H,Y).processEntries(K.entries);let Q=Array(j);for(let P=0;P<j;P++){Q[P]=Array(G);for(let L=0;L<G;L++)Q[P][L]=[]}for(let P=0;P<K.entries.length;P++){let L=K.entries[P];Q[L.quadrant][L.ring].push(L)}let S=xK(K,U,F,Z),{radar:B,legendLeftColumn:w,legendRightColumn:O,grid:W}=S;if(vK(W,K,U,F,D),!K.footer)K.footer="▲ moved up     ▼ moved down     ★ new     ⬤ no change";if(qK(B,K),K.print_layout)w.style("display","flex"),O.style("display","flex"),hK(w,O,Q,K,j,G,r,a,e,i);else w.style("display","none").html(""),O.style("display","none").html("");let E=B.append("g").attr("id","rink"),A=yK(B,K.font_family),C=kK(E,K.entries,K,r,a,e,i);if(RK(K.entries,C,K),K.debug_geometry)OK(B,K,U,F,j,G,Q);if(K.print_ring_descriptions_table)bK(K)}var _K=TK();m.jsonIO=_K;var oK=m;return m}();if(typeof window<"u")window.radar_visualization=l;if(typeof b<"u"&&typeof b.exports<"u")b.exports=l;if(typeof global<"u")global.radar_visualization=l});export default tK();
